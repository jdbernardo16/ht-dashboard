import{b as Y,j as P,m as c,d as J,o as i,w as _,e as s,f as w,a as l,n as d,u as o,k as g,p as q,z as f,c as u,F as k,y as h,t as b,i as V,g as E,A as j,v as W,q as G}from"./app-DMsrlBw0.js";import{_ as Q}from"./AuthenticatedLayout-CoyhxnNm.js";import{_ as n,a as v,b as m}from"./TextInput-FbyQ28m3.js";import{P as Z}from"./PrimaryButton-CLiSzqXU.js";import{_ as ee}from"./SecondaryButton--IEOdd-0.js";import{F as se}from"./FileUpload-Cxeb33nX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const te={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},oe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},re={class:"p-6 text-gray-900"},le={class:"border-b border-gray-200 pb-6"},ae={class:"mt-4"},ie={class:"border-b border-gray-200 pb-6"},de={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ne={class:"border-b border-gray-200 pb-6"},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},me=["value"],ge=["value"],pe={class:"border-b border-gray-200 pb-6"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},fe={class:"border-b border-gray-200 pb-6"},be={class:"mt-1"},ve={class:"relative"},ye=["onClick"],xe=["disabled"],_e=["disabled"],we={key:0,class:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 p-2"},ke={class:"text-sm text-gray-600 flex items-center justify-between"},he={class:"font-medium text-indigo-600 bg-indigo-50 px-2 py-1 rounded"},Ve={key:0,class:"mt-1 p-2 bg-gray-50 border border-gray-200 rounded-md"},Ce={class:"flex flex-wrap gap-1"},Te=["onClick","onKeydown"],Fe={class:"mt-4"},De={class:"border-b border-gray-200 pb-6"},Ue={class:"border-b border-gray-200 pb-6"},Se={class:"space-y-4"},Pe={class:"flex items-center"},qe={key:0},Be={class:"flex items-center justify-end space-x-3 pt-6"},Ae={key:0},Ie={key:1},Re={__name:"Create",props:{users:{type:Array,default:()=>[]},goals:{type:Array,default:()=>[]}},setup(K){const B=K,t=Y({title:"",description:"",priority:"medium",status:"pending",due_date:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],assigned_to:"",category:"",estimated_hours:null,actual_hours:null,tags:[],notes:"",parent_task_id:null,related_goal_id:"",is_recurring:!1,recurring_frequency:"",media:[]}),R=P(()=>B.users),z=P(()=>B.goals),p=c(""),C=c(null),T=c(!1),y=c(""),A=c(["urgent","important","follow-up","review","meeting","documentation"]),F=P(()=>Array.isArray(t.tags)?t.tags.filter(a=>a&&a.trim()):[]),H=()=>{C.value&&C.value.focus()},I=()=>{const a=p.value.trim();y.value=a},$=a=>{const e=p.value.trim();a.key==="Enter"||a.key===","||a.keyCode===188?(a.preventDefault(),e&&D(e)):a.key==="Backspace"&&!e&&F.value.length>0&&(a.preventDefault(),N(F.value.length-1))},M=a=>{a?.preventDefault?.(),a?.stopPropagation?.();const e=p.value.trim();e&&D(e)},D=a=>{if(!a)return;const e=a.trim();e&&(t.tags.includes(e)||t.tags.push(e),p.value="",y.value="")},N=a=>{a>=0&&a<t.tags.length&&t.tags.splice(a,1)},U=a=>{D(a)},L=a=>{console.error("File upload error:",a)},O=()=>{t.post(route("tasks.web.store"),{forceFormData:!0,onSuccess:()=>{G.visit(route("tasks.web.index"))},onError:a=>{console.error("Form errors:",a)}})},X=()=>{G.visit(route("tasks.web.index"))};return(a,e)=>(i(),J(Q,null,{header:_(()=>e[20]||(e[20]=[s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Create New Task ",-1)])),default:_(()=>[s("div",null,[s("div",te,[s("div",oe,[s("div",re,[s("form",{onSubmit:w(O,["prevent"]),class:"space-y-6"},[s("div",le,[e[21]||(e[21]=s("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Basic Information ",-1)),s("div",null,[l(n,{for:"title",value:"Title *"}),l(v,{id:"title",modelValue:o(t).title,"onUpdate:modelValue":e[0]||(e[0]=r=>o(t).title=r),type:"text",class:d(["mt-1 block w-full",{"border-red-500":o(t).errors.title}]),required:"",autofocus:""},null,8,["modelValue","class"]),l(m,{message:o(t).errors.title,class:"mt-2"},null,8,["message"])]),s("div",ae,[l(n,{for:"description",value:"Description"}),g(s("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=r=>o(t).description=r),class:d(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors.description}]),rows:"4"},null,2),[[q,o(t).description]]),l(m,{message:o(t).errors.description,class:"mt-2"},null,8,["message"])])]),s("div",ie,[e[24]||(e[24]=s("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Task Details ",-1)),s("div",de,[s("div",null,[l(n,{for:"priority",value:"Priority *"}),g(s("select",{id:"priority","onUpdate:modelValue":e[2]||(e[2]=r=>o(t).priority=r),class:d(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors.priority}]),required:""},e[22]||(e[22]=[s("option",{value:""}," Select Priority ",-1),s("option",{value:"low"},"Low",-1),s("option",{value:"medium"}," Medium ",-1),s("option",{value:"high"},"High",-1),s("option",{value:"urgent"}," Urgent ",-1)]),2),[[f,o(t).priority]]),l(m,{message:o(t).errors.priority,class:"mt-2"},null,8,["message"])]),s("div",null,[l(n,{for:"status",value:"Status *"}),g(s("select",{id:"status","onUpdate:modelValue":e[3]||(e[3]=r=>o(t).status=r),class:d(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors.status}]),required:""},e[23]||(e[23]=[s("option",{value:""}," Select Status ",-1),s("option",{value:"pending"}," Pending ",-1),s("option",{value:"not_started"}," Not Started ",-1),s("option",{value:"in_progress"}," In Progress ",-1),s("option",{value:"completed"}," Completed ",-1),s("option",{value:"cancelled"}," Cancelled ",-1)]),2),[[f,o(t).status]]),l(m,{message:o(t).errors.status,class:"mt-2"},null,8,["message"])]),s("div",null,[l(n,{for:"due_date",value:"Due Date *"}),l(v,{id:"due_date",modelValue:o(t).due_date,"onUpdate:modelValue":e[4]||(e[4]=r=>o(t).due_date=r),type:"date",class:d(["mt-1 block w-full",{"border-red-500":o(t).errors.due_date}]),required:""},null,8,["modelValue","class"]),l(m,{message:o(t).errors.due_date,class:"mt-2"},null,8,["message"])]),s("div",null,[l(n,{for:"category",value:"Category"}),l(v,{id:"category",modelValue:o(t).category,"onUpdate:modelValue":e[5]||(e[5]=r=>o(t).category=r),type:"text",class:d(["mt-1 block w-full",{"border-red-500":o(t).errors.category}])},null,8,["modelValue","class"]),l(m,{message:o(t).errors.category,class:"mt-2"},null,8,["message"])])])]),s("div",ne,[e[27]||(e[27]=s("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Assignment ",-1)),s("div",ue,[s("div",null,[l(n,{for:"assigned_to",value:"Assigned To"}),g(s("select",{id:"assigned_to","onUpdate:modelValue":e[6]||(e[6]=r=>o(t).assigned_to=r),class:d(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors.assigned_to}])},[e[25]||(e[25]=s("option",{value:""},"Unassigned",-1)),(i(!0),u(k,null,h(R.value,r=>(i(),u("option",{key:r.id,value:r.id},b(r.name),9,me))),128))],2),[[f,o(t).assigned_to]]),l(m,{message:o(t).errors.assigned_to,class:"mt-2"},null,8,["message"])]),s("div",null,[l(n,{for:"related_goal_id",value:"Related Goal"}),g(s("select",{id:"related_goal_id","onUpdate:modelValue":e[7]||(e[7]=r=>o(t).related_goal_id=r),class:d(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors.related_goal_id}])},[e[26]||(e[26]=s("option",{value:""},"No Goal",-1)),(i(!0),u(k,null,h(z.value,r=>(i(),u("option",{key:r.id,value:r.id},b(r.title),9,ge))),128))],2),[[f,o(t).related_goal_id]]),l(m,{message:o(t).errors.related_goal_id,class:"mt-2"},null,8,["message"])])])]),s("div",pe,[e[28]||(e[28]=s("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Time Tracking ",-1)),s("div",ce,[s("div",null,[l(n,{for:"estimated_hours",value:"Estimated Hours"}),l(v,{id:"estimated_hours",modelValue:o(t).estimated_hours,"onUpdate:modelValue":e[8]||(e[8]=r=>o(t).estimated_hours=r),type:"number",step:"0.5",min:"0",class:d(["mt-1 block w-full",{"border-red-500":o(t).errors.estimated_hours}])},null,8,["modelValue","class"]),l(m,{message:o(t).errors.estimated_hours,class:"mt-2"},null,8,["message"])]),s("div",null,[l(n,{for:"actual_hours",value:"Actual Hours"}),l(v,{id:"actual_hours",modelValue:o(t).actual_hours,"onUpdate:modelValue":e[9]||(e[9]=r=>o(t).actual_hours=r),type:"number",step:"0.5",min:"0",class:d(["mt-1 block w-full",{"border-red-500":o(t).errors.actual_hours}])},null,8,["modelValue","class"]),l(m,{message:o(t).errors.actual_hours,class:"mt-2"},null,8,["message"])])])]),s("div",fe,[e[34]||(e[34]=s("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Additional Details ",-1)),s("div",null,[l(n,{for:"tags",value:"Tags"}),s("div",be,[s("div",ve,[s("div",{class:d(["flex flex-wrap items-center gap-2 p-2 border border-gray-300 rounded-md shadow-sm focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 min-h-12 transition-colors",{"border-red-500":o(t).errors.tags,"bg-gray-50":T.value}]),onClick:H},[(i(!0),u(k,null,h(F.value,(r,x)=>(i(),u("span",{key:x,class:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800 border border-indigo-200 transition-all hover:bg-indigo-200 hover:scale-105"},[E(b(r.trim())+" ",1),s("button",{type:"button",onClick:w(S=>N(x),["stop"]),class:"text-indigo-600 hover:text-indigo-800 focus:outline-none transition-colors",title:"Remove tag"},e[29]||(e[29]=[s("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,ye)]))),128)),g(s("input",{ref_key:"tagInputRef",ref:C,type:"text","onUpdate:modelValue":e[10]||(e[10]=r=>p.value=r),onKeydown:e[11]||(e[11]=(...r)=>$&&$(...r)),onFocus:e[12]||(e[12]=r=>T.value=!0),onBlur:e[13]||(e[13]=r=>T.value=!1),onInput:e[14]||(e[14]=(...r)=>I&&I(...r)),placeholder:"Type to add tags...",class:d(["flex-1 min-w-0 bg-transparent border-none outline-none py-1 px-2 text-sm placeholder-gray-400",{"opacity-50":o(t).processing}]),disabled:o(t).processing},null,42,xe),[[q,p.value]]),p.value.trim()?(i(),u("button",{key:0,type:"button",onClick:e[15]||(e[15]=w((...r)=>M&&M(...r),["prevent","stop"])),class:"text-indigo-600 hover:text-indigo-800 focus:outline-none transition-colors p-1 rounded",title:"Add tag",disabled:o(t).processing},e[30]||(e[30]=[s("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)]),8,_e)):V("",!0)],2),y.value?(i(),u("div",we,[s("div",ke,[e[31]||(e[31]=s("span",null,"Press Enter or Comma to add:",-1)),s("span",he,b(y.value),1)])])):V("",!0)]),A.value.length>0?(i(),u("div",Ve,[e[32]||(e[32]=s("p",{class:"text-xs text-gray-500 mb-1"}," Common tags: ",-1)),s("div",Ce,[(i(!0),u(k,null,h(A.value,(r,x)=>(i(),u("span",{key:x,onClick:S=>U(r),class:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors cursor-pointer inline-block",role:"button",tabindex:"0",onKeydown:[j(S=>U(r),["enter"]),j(w(S=>U(r),["prevent"]),["space"])]},b(r),41,Te))),128))])])):V("",!0),e[33]||(e[33]=s("p",{class:"mt-1 text-xs text-gray-500"}," Press Enter or Comma to add tags. ",-1))]),l(m,{message:o(t).errors.tags,class:"mt-2"},null,8,["message"])]),s("div",Fe,[l(n,{for:"notes",value:"Notes"}),g(s("textarea",{id:"notes","onUpdate:modelValue":e[16]||(e[16]=r=>o(t).notes=r),class:d(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors.notes}]),rows:"3"},null,2),[[q,o(t).notes]]),l(m,{message:o(t).errors.notes,class:"mt-2"},null,8,["message"])])]),s("div",De,[e[36]||(e[36]=s("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," File Attachments ",-1)),s("div",null,[l(n,{value:"Upload Files",class:"mb-2"}),l(se,{modelValue:o(t).media,"onUpdate:modelValue":e[17]||(e[17]=r=>o(t).media=r),multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt",maxFiles:10,maxSize:10*1024*1024,title:"Drag & drop files here or click to browse",description:"Supports images, PDFs, and documents (max 10MB each)",onError:L},null,8,["modelValue"]),l(m,{message:o(t).errors.media,class:"mt-2"},null,8,["message"]),e[35]||(e[35]=s("p",{class:"text-xs text-gray-500 mt-2"}," You can upload up to 10 files. Supported formats: JPG, PNG, GIF, PDF, DOC, DOCX, TXT. ",-1))])]),s("div",Ue,[e[38]||(e[38]=s("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Recurring Task ",-1)),s("div",Se,[s("div",Pe,[g(s("input",{id:"is_recurring","onUpdate:modelValue":e[18]||(e[18]=r=>o(t).is_recurring=r),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[W,o(t).is_recurring]]),l(n,{for:"is_recurring",value:"This is a recurring task",class:"ml-2"})]),o(t).is_recurring?(i(),u("div",qe,[l(n,{for:"recurring_frequency",value:"Frequency"}),g(s("select",{id:"recurring_frequency","onUpdate:modelValue":e[19]||(e[19]=r=>o(t).recurring_frequency=r),class:d(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":o(t).errors.recurring_frequency}])},e[37]||(e[37]=[s("option",{value:""}," Select Frequency ",-1),s("option",{value:"daily"},"Daily",-1),s("option",{value:"weekly"}," Weekly ",-1),s("option",{value:"monthly"}," Monthly ",-1),s("option",{value:"yearly"}," Yearly ",-1)]),2),[[f,o(t).recurring_frequency]]),l(m,{message:o(t).errors.recurring_frequency,class:"mt-2"},null,8,["message"])])):V("",!0)])]),s("div",Be,[l(ee,{type:"button",onClick:X,disabled:o(t).processing},{default:_(()=>e[39]||(e[39]=[E(" Cancel ",-1)])),_:1,__:[39]},8,["disabled"]),l(Z,{type:"submit",disabled:o(t).processing,class:d({"opacity-50":o(t).processing})},{default:_(()=>[o(t).processing?(i(),u("span",Ae,"Creating...")):(i(),u("span",Ie,"Create Task"))]),_:1},8,["disabled","class"])])],32)])])])])]),_:1}))}};export{Re as default};
