import{m as n,x as O,d as L,o as z,w as r,e as l,a as c,g as H,t as u,G as R,n as m,s}from"./app-CxJ0vpa7.js";import{_ as W}from"./AuthenticatedLayout-Bp61g_Pn.js";import{D as Y,_ as j}from"./Pagination-BC355tww.js";import{_ as J}from"./FormModal-8ezY70kB.js";import{_ as K}from"./SearchFilter-BnGKHwQ3.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-BicJlByu.js";const Q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},X={class:"font-medium text-gray-900"},Z={class:"font-medium text-blue-600"},ee={class:"w-full bg-gray-200 rounded-full h-2"},te={class:"text-xs text-gray-600"},de={__name:"Index",setup(ae){const b=n([]),d=n({}),o=n(!1),f=n(!1),v=n(!1),g=n({}),p=n({search:"",status:"",type:"",priority:"",date_from:"",date_to:""}),k=[{key:"id",label:"ID",sortable:!0},{key:"title",label:"Title",sortable:!0},{key:"type",label:"Type",sortable:!0},{key:"target_value",label:"Target",type:"currency",sortable:!0},{key:"progress",label:"Progress",sortable:!0},{key:"priority",label:"Priority",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"target_date",label:"Target Date",type:"date",sortable:!0}],x=[{value:"not_started",label:"Not Started"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"failed",label:"Failed"}],_=[{value:"sales",label:"Sales"},{value:"revenue",label:"Revenue"},{value:"expense",label:"Expense"},{value:"task",label:"Task"},{value:"content",label:"Content"},{value:"other",label:"Other"}],h=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}],w=[{name:"title",label:"Title",type:"text",required:!0},{name:"description",label:"Description",type:"textarea",required:!1},{name:"type",label:"Type",type:"select",required:!0,options:_},{name:"target_value",label:"Target Value",type:"number",required:!0,min:0,step:.01},{name:"current_value",label:"Current Value",type:"number",required:!1,min:0,step:.01},{name:"budget",label:"Budget ($)",type:"number",required:!1,min:0,step:.01},{name:"labor_hours",label:"Labor Hours",type:"number",required:!1,min:0,step:.01},{name:"target_date",label:"Target Date",type:"date",required:!0},{name:"priority",label:"Priority",type:"select",required:!0,options:h},{name:"status",label:"Status",type:"select",required:!0,options:x},{name:"category",label:"Category",type:"text",required:!1},{name:"notes",label:"Notes",type:"textarea",required:!1},{name:"is_recurring",label:"Recurring",type:"checkbox",required:!1},{name:"recurring_frequency",label:"Frequency",type:"select",required:!1,options:[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"},{value:"yearly",label:"Yearly"}]}],C=[{value:"not_started",label:"Not Started"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"failed",label:"Failed"}],i=()=>{o.value=!0,s.get("/goals",p.value,{preserveState:!0,onSuccess:e=>{d.value=e.props.goals,b.value=e.props.goals.data||e.props.goals,o.value=!1},onError:e=>{console.error("Error fetching goals:",e),o.value=!1}})},S=()=>{s.visit("/goals/create")},q=e=>{s.visit(`/goals/${e.id}/edit`)},M=e=>{s.visit(`/goals/${e.id}`)},T=e=>{confirm("Are you sure you want to delete this goal?")&&s.delete(`/goals/${e.id}`,{onSuccess:()=>i(),onError:a=>console.error("Error deleting goal:",a)})},E=e=>{o.value=!0,v.value?s.put(`/goals/${g.value.id}`,e,{onSuccess:()=>{i(),y()},onError:a=>{formModal.value&&formModal.value.setErrors(a),o.value=!1}}):s.post("/goals",e,{onSuccess:()=>{i(),y()},onError:a=>{formModal.value&&formModal.value.setErrors(a),o.value=!1}})},y=()=>{f.value=!1,g.value={},formModal.value&&formModal.value.resetForm()},D=()=>{i()},$=()=>{p.value={search:"",status:"",type:"",priority:"",date_from:"",date_to:""},i()},F=e=>{s.visit(e,{preserveState:!0,preserveScroll:!0,only:["goals","filters"]})},G=e=>parseFloat(e).toFixed(2),P=e=>new Date(e).toLocaleDateString(),V=e=>e.charAt(0).toUpperCase()+e.slice(1).replace("_"," "),N=e=>e.charAt(0).toUpperCase()+e.slice(1).replace("_"," "),A=e=>e.charAt(0).toUpperCase()+e.slice(1),U=e=>({not_started:"bg-gray-100 text-gray-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800",B=e=>({sales:"bg-purple-100 text-purple-800",revenue:"bg-green-100 text-green-800",expense:"bg-red-100 text-red-800",task:"bg-blue-100 text-blue-800",content:"bg-orange-100 text-orange-800",other:"bg-gray-100 text-gray-800"})[e]||"bg-gray-100 text-gray-800",I=e=>({low:"bg-gray-100 text-gray-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800";return O(()=>{i()}),(e,a)=>(z(),L(W,null,{header:r(()=>a[1]||(a[1]=[l("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Goals Management ",-1)])),default:r(()=>[l("div",null,[l("div",Q,[c(K,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=t=>p.value=t),filters:["search","status","type","priority","date"],"status-options":x,"type-options":_,"priority-options":h,onApply:D,onClear:$},null,8,["modelValue"]),c(Y,{data:b.value,columns:k,filters:C,onCreate:S,onView:M,onEdit:q,onDelete:T},{title:r(({item:t})=>[l("div",X,u(t.title),1)]),type:r(({item:t})=>[l("span",{class:m([B(t.type),"px-2 py-1 text-xs font-medium rounded-full"])},u(N(t.type)),3)]),status:r(({item:t})=>[l("span",{class:m([U(t.status),"px-2 py-1 text-xs font-medium rounded-full"])},u(V(t.status)),3)]),priority:r(({item:t})=>[l("span",{class:m([I(t.priority),"px-2 py-1 text-xs font-medium rounded-full"])},u(A(t.priority)),3)]),target_value:r(({item:t})=>[l("span",Z,"$"+u(G(t.target_value)),1)]),progress:r(({item:t})=>[l("div",ee,[l("div",{class:"bg-blue-600 h-2 rounded-full",style:R({width:`${Math.min(t.progress/t.target_value*100,100)}%`})},null,4)]),l("span",te,u(Math.round(t.progress/t.target_value*100))+"%",1)]),target_date:r(({item:t})=>[H(u(P(t.target_date)),1)]),_:1},8,["data"]),c(j,{links:d.value.links,from:d.value.from,to:d.value.to,total:d.value.total,onNavigate:F},null,8,["links","from","to","total"])])]),c(J,{show:f.value,title:v.value?"Edit Goal":"Create New Goal",fields:w,"initial-data":g.value,loading:o.value,onClose:y,onSubmit:E,ref:"formModal"},null,8,["show","title","initial-data","loading"])]),_:1}))}};export{de as default};
