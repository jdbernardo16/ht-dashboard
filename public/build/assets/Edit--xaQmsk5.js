import{b as X,y as Y,m as y,j as H,d as W,o as u,w as $,e as t,f as h,a as n,k as f,n as c,u as s,c as m,F as x,z as _,t as p,q as P,v as Q,p as V,i as w,g as Z,A as q,s as N}from"./app-DIXSCgPE.js";import{_ as ee}from"./AuthenticatedLayout-_5prmJNd.js";import{_ as i,b as d,a as b}from"./TextInput-CeUe0YzA.js";/* empty css                                                                      */import{S as j}from"./SimpleFileUploader-zw66EHqa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const te={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},oe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},se={class:"p-6 text-gray-900"},re=["value"],le={class:"grid grid-cols-2 md:grid-cols-3 gap-3"},ne=["id","value"],ae=["for"],ie={class:"mt-1"},de={class:"relative"},ue=["onClick"],ce=["disabled"],me=["disabled"],pe={key:0,class:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 p-2"},ge={class:"text-sm text-gray-600 flex items-center justify-between"},fe={class:"font-medium text-indigo-600 bg-indigo-50 px-2 py-1 rounded"},ve={key:0,class:"mt-1 p-2 bg-gray-50 border border-gray-200 rounded-md"},be={class:"flex flex-wrap gap-1"},ye=["onClick","onKeydown"],xe={class:"text-xs text-gray-500 mt-1"},_e={key:0,class:"mb-4"},we=["src"],ke={key:0,class:"mb-4"},he={class:"space-y-2"},Pe={class:"flex items-center space-x-2"},Ve={class:"text-sm text-gray-700"},Ce={class:"text-xs text-gray-500"},Te=["href"],Se={class:"flex items-center justify-end space-x-3"},Ue=["disabled"],Ee={__name:"Edit",props:{contentPost:{type:Object,required:!0},clients:{type:Array,required:!0}},setup(A){const M=l=>l?new Date(l).toISOString().split("T")[0]:"",z=l=>{if(l===0)return"0 Bytes";const e=1024,r=["Bytes","KB","MB","GB"],g=Math.floor(Math.log(l)/Math.log(e));return parseFloat((l/Math.pow(e,g)).toFixed(2))+" "+r[g]},a=A,G=[{value:"website",label:"Website"},{value:"facebook",label:"Facebook"},{value:"instagram",label:"Instagram"},{value:"twitter",label:"Twitter"},{value:"linkedin",label:"LinkedIn"},{value:"tiktok",label:"TikTok"},{value:"youtube",label:"YouTube"},{value:"pinterest",label:"Pinterest"},{value:"email",label:"Email"},{value:"other",label:"Other"}],o=X({client_id:a.contentPost.client_id!==void 0?a.contentPost.client_id:null,title:a.contentPost.title||"",platform:Array.isArray(a.contentPost.platform)?a.contentPost.platform:[],content_type:a.contentPost.content_type||"",description:a.contentPost.description||"",content_url:a.contentPost.content_url||"",image:null,post_count:a.contentPost.post_count||1,scheduled_date:M(a.contentPost.scheduled_date),published_date:M(a.contentPost.published_date),status:a.contentPost.status||"draft",content_category:a.contentPost.content_category||"",tags:(()=>{if(Array.isArray(a.contentPost.tags))return a.contentPost.tags;if(typeof a.contentPost.tags=="string")try{const l=JSON.parse(a.contentPost.tags);return Array.isArray(l)?l:[]}catch{return a.contentPost.tags.split(",").map(e=>e.trim()).filter(e=>e)}return[]})(),notes:a.contentPost.notes||"",meta_description:a.contentPost.meta_description||"",seo_keywords:a.contentPost.seo_keywords||"",media:[]});Y(()=>o.image,l=>{l&&typeof l=="object"&&l.file instanceof File&&(o.image=l.file,console.log("Extracted File object from FileData:",l.file.name))},{deep:!0});const v=y(""),C=y(null),T=y(!1),k=y(""),B=y(["social-media","blog","video","image","campaign","promotional","educational","entertainment"]),S=H(()=>Array.isArray(o.tags)?o.tags.filter(l=>l&&l.trim()):[]),K=()=>{C.value&&C.value.focus()},R=()=>{const l=v.value.trim();k.value=l},O=l=>{const e=v.value.trim();l.key==="Enter"||l.key===","||l.keyCode===188?(l.preventDefault(),e&&U(e)):l.key==="Backspace"&&!e&&S.value.length>0&&(l.preventDefault(),E(S.value.length-1))},I=l=>{l?.preventDefault?.(),l?.stopPropagation?.();const e=v.value.trim();e&&U(e)},U=l=>{if(!l)return;const e=l.trim();e&&(o.tags.includes(e)||o.tags.push(e),v.value="",k.value="")},E=l=>{l>=0&&l<o.tags.length&&o.tags.splice(l,1)},F=l=>{U(l)},L=()=>{o.put(route("content.web.update",a.contentPost.id),{preserveScroll:!0,onSuccess:()=>{console.log("Content post updated successfully"),N.visit(route("content.web.show",a.contentPost.id))},onError:l=>{console.error("Error updating content post:",l),l.client_id&&console.error("Client ID error:",l.client_id),l.content_type&&console.error("Content Type error:",l.content_type)}})},J=()=>{N.visit(route("content.web.show",a.contentPost.id))};return(l,e)=>(u(),W(ee,null,{header:$(()=>e[20]||(e[20]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Edit Content Post ",-1)])),default:$(()=>[t("div",null,[t("div",te,[t("div",oe,[t("div",se,[t("form",{onSubmit:h(L,["prevent"]),class:"space-y-6"},[t("div",null,[n(i,{for:"client_id",value:"Client *"}),f(t("select",{id:"client_id","onUpdate:modelValue":e[0]||(e[0]=r=>s(o).client_id=r),required:"",class:c(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(o).errors.client_id}])},[e[21]||(e[21]=t("option",{value:""},"Select a client",-1)),(u(!0),m(x,null,_(A.clients,r=>(u(),m("option",{key:r.id,value:r.id},p(r.first_name)+" "+p(r.last_name),9,re))),128))],2),[[P,s(o).client_id]]),n(d,{message:s(o).errors.client_id,class:"mt-2"},null,8,["message"])]),t("div",null,[n(i,{for:"title",value:"Title *"}),n(b,{id:"title",modelValue:s(o).title,"onUpdate:modelValue":e[1]||(e[1]=r=>s(o).title=r),type:"text",class:c(["mt-1 block w-full",{"border-red-500":s(o).errors.title}]),required:"",autofocus:""},null,8,["modelValue","class"]),n(d,{message:s(o).errors.title,class:"mt-2"},null,8,["message"])]),t("div",null,[n(i,{value:"Platforms *",class:"mb-2"}),t("div",le,[(u(),m(x,null,_(G,r=>t("div",{key:r.value,class:"flex items-center"},[f(t("input",{type:"checkbox",id:`platform-${r.value}`,value:r.value,"onUpdate:modelValue":e[2]||(e[2]=g=>s(o).platform=g),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,ne),[[Q,s(o).platform]]),t("label",{for:`platform-${r.value}`,class:"ml-2 text-sm text-gray-700"},p(r.label),9,ae)])),64))]),n(d,{message:s(o).errors.platform,class:"mt-2"},null,8,["message"])]),t("div",null,[n(i,{for:"content_type",value:"Content Type *"}),f(t("select",{id:"content_type","onUpdate:modelValue":e[3]||(e[3]=r=>s(o).content_type=r),required:"",class:c(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(o).errors.content_type}])},e[22]||(e[22]=[t("option",{value:""}," Select content type ",-1),t("option",{value:"post"},"Post",-1),t("option",{value:"story"},"Story",-1),t("option",{value:"reel"},"Reel",-1),t("option",{value:"video"},"Video",-1),t("option",{value:"image"},"Image",-1),t("option",{value:"carousel"},"Carousel",-1),t("option",{value:"live"},"Live",-1),t("option",{value:"article"},"Article",-1)]),2),[[P,s(o).content_type]]),n(d,{message:s(o).errors.content_type,class:"mt-2"},null,8,["message"])]),t("div",null,[n(i,{for:"description",value:"Description *"}),f(t("textarea",{id:"description","onUpdate:modelValue":e[4]||(e[4]=r=>s(o).description=r),required:"",rows:"3",class:c(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(o).errors.description}])},null,2),[[V,s(o).description]]),n(d,{message:s(o).errors.description,class:"mt-2"},null,8,["message"])]),t("div",null,[n(i,{for:"content_url",value:"Content URL *"}),n(b,{id:"content_url",modelValue:s(o).content_url,"onUpdate:modelValue":e[5]||(e[5]=r=>s(o).content_url=r),type:"url",required:"",class:c(["mt-1 block w-full",{"border-red-500":s(o).errors.content_url}])},null,8,["modelValue","class"]),n(d,{message:s(o).errors.content_url,class:"mt-2"},null,8,["message"])]),t("div",null,[n(i,{for:"post_count",value:"Post Count"}),n(b,{id:"post_count",modelValue:s(o).post_count,"onUpdate:modelValue":e[6]||(e[6]=r=>s(o).post_count=r),type:"number",min:"1",class:c(["mt-1 block w-full",{"border-red-500":s(o).errors.post_count}])},null,8,["modelValue","class"]),n(d,{message:s(o).errors.post_count,class:"mt-2"},null,8,["message"])]),t("div",null,[n(i,{for:"scheduled_date",value:"Scheduled Date *"}),n(b,{id:"scheduled_date",modelValue:s(o).scheduled_date,"onUpdate:modelValue":e[7]||(e[7]=r=>s(o).scheduled_date=r),type:"date",required:"",class:c(["mt-1 block w-full",{"border-red-500":s(o).errors.scheduled_date}])},null,8,["modelValue","class"]),n(d,{message:s(o).errors.scheduled_date,class:"mt-2"},null,8,["message"])]),t("div",null,[n(i,{for:"published_date",value:"Published Date *"}),n(b,{id:"published_date",modelValue:s(o).published_date,"onUpdate:modelValue":e[8]||(e[8]=r=>s(o).published_date=r),type:"date",required:"",class:c(["mt-1 block w-full",{"border-red-500":s(o).errors.published_date}])},null,8,["modelValue","class"]),n(d,{message:s(o).errors.published_date,class:"mt-2"},null,8,["message"])]),t("div",null,[n(i,{for:"status",value:"Status *"}),f(t("select",{id:"status","onUpdate:modelValue":e[9]||(e[9]=r=>s(o).status=r),required:"",class:c(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(o).errors.status}])},e[23]||(e[23]=[t("option",{value:"draft"},"Draft",-1),t("option",{value:"scheduled"},"Scheduled",-1),t("option",{value:"published"},"Published",-1),t("option",{value:"archived"},"Archived",-1)]),2),[[P,s(o).status]]),n(d,{message:s(o).errors.status,class:"mt-2"},null,8,["message"])]),t("div",null,[n(i,{for:"content_category",value:"Content Category"}),f(t("select",{id:"content_category","onUpdate:modelValue":e[10]||(e[10]=r=>s(o).content_category=r),class:c(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(o).errors.content_category}])},e[24]||(e[24]=[t("option",{value:""},"Select Category",-1),t("option",{value:"Social Media Post"}," Social Media Post ",-1),t("option",{value:"Blog Article"}," Blog Article ",-1),t("option",{value:"Email Newsletter"}," Email Newsletter ",-1),t("option",{value:"Product Description"}," Product Description ",-1),t("option",{value:"Marketing Campaign"}," Marketing Campaign ",-1),t("option",{value:"Press Release"}," Press Release ",-1),t("option",{value:"Video Content"}," Video Content ",-1),t("option",{value:"Other"},"Other",-1)]),2),[[P,s(o).content_category]]),n(d,{message:s(o).errors.content_category,class:"mt-2"},null,8,["message"])]),t("div",null,[n(i,{for:"tags",value:"Tags"}),t("div",ie,[t("div",de,[t("div",{class:c(["flex flex-wrap items-center gap-2 p-2 border border-gray-300 rounded-md shadow-sm focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 min-h-12 transition-colors",{"border-red-500":s(o).errors.tags,"bg-gray-50":T.value}]),onClick:K},[(u(!0),m(x,null,_(S.value,(r,g)=>(u(),m("span",{key:g,class:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800 border border-indigo-200 transition-all hover:bg-indigo-200 hover:scale-105"},[Z(p(r.trim())+" ",1),t("button",{type:"button",onClick:h(D=>E(g),["stop"]),class:"text-indigo-600 hover:text-indigo-800 focus:outline-none transition-colors",title:"Remove tag"},e[25]||(e[25]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,ue)]))),128)),f(t("input",{ref_key:"tagInputRef",ref:C,type:"text","onUpdate:modelValue":e[11]||(e[11]=r=>v.value=r),onKeydown:O,onFocus:e[12]||(e[12]=r=>T.value=!0),onBlur:e[13]||(e[13]=r=>T.value=!1),onInput:R,placeholder:"Type to add tags...",class:c(["flex-1 min-w-0 bg-transparent border-none outline-none py-1 px-2 text-sm placeholder-gray-400",{"opacity-50":s(o).processing}]),disabled:s(o).processing},null,42,ce),[[V,v.value]]),v.value.trim()?(u(),m("button",{key:0,type:"button",onClick:e[14]||(e[14]=h((...r)=>I&&I(...r),["prevent","stop"])),class:"text-indigo-600 hover:text-indigo-800 focus:outline-none transition-colors p-1 rounded",title:"Add tag",disabled:s(o).processing},e[26]||(e[26]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)]),8,me)):w("",!0)],2),k.value?(u(),m("div",pe,[t("div",ge,[e[27]||(e[27]=t("span",null,"Press Enter or Comma to add:",-1)),t("span",fe,p(k.value),1)])])):w("",!0)]),B.value.length>0?(u(),m("div",ve,[e[28]||(e[28]=t("p",{class:"text-xs text-gray-500 mb-1"}," Common tags: ",-1)),t("div",be,[(u(!0),m(x,null,_(B.value,(r,g)=>(u(),m("span",{key:g,onClick:D=>F(r),class:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors cursor-pointer inline-block",role:"button",tabindex:"0",onKeydown:[q(D=>F(r),["enter"]),q(h(D=>F(r),["prevent"]),["space"])]},p(r),41,ye))),128))])])):w("",!0)]),n(d,{message:s(o).errors.tags,class:"mt-2"},null,8,["message"])]),t("div",null,[n(i,{for:"notes",value:"Notes"}),f(t("textarea",{id:"notes","onUpdate:modelValue":e[15]||(e[15]=r=>s(o).notes=r),rows:"3",class:c(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(o).errors.notes}])},null,2),[[V,s(o).notes]]),n(d,{message:s(o).errors.notes,class:"mt-2"},null,8,["message"])]),t("div",null,[n(i,{for:"meta_description",value:"Meta Description"}),f(t("textarea",{id:"meta_description","onUpdate:modelValue":e[16]||(e[16]=r=>s(o).meta_description=r),rows:"2",maxlength:"255",class:c(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(o).errors.meta_description}])},null,2),[[V,s(o).meta_description]]),n(d,{message:s(o).errors.meta_description,class:"mt-2"},null,8,["message"]),t("p",xe,p(s(o).meta_description?s(o).meta_description.length:0)+"/255 characters ",1)]),t("div",null,[n(i,{for:"seo_keywords",value:"SEO Keywords"}),n(b,{id:"seo_keywords",modelValue:s(o).seo_keywords,"onUpdate:modelValue":e[17]||(e[17]=r=>s(o).seo_keywords=r),type:"text",maxlength:"255",class:c(["mt-1 block w-full",{"border-red-500":s(o).errors.seo_keywords}])},null,8,["modelValue","class"]),n(d,{message:s(o).errors.seo_keywords,class:"mt-2"},null,8,["message"]),e[29]||(e[29]=t("p",{class:"text-xs text-gray-500 mt-1"}," Separate keywords with commas ",-1))]),t("div",null,[n(i,{value:"Upload Image",class:"mb-2"}),a.contentPost.image_url?(u(),m("div",_e,[e[30]||(e[30]=t("p",{class:"text-sm text-gray-600 mb-2"}," Current Image: ",-1)),t("img",{src:a.contentPost.image_url,alt:"Current content image",class:"max-w-full h-auto max-h-48 rounded-lg border",onerror:"this.style.display='none'"},null,8,we),e[31]||(e[31]=t("p",{class:"text-xs text-gray-500 mt-1"}," This image will be replaced if you upload a new one. ",-1))])):w("",!0),n(j,{modelValue:s(o).image,"onUpdate:modelValue":e[18]||(e[18]=r=>s(o).image=r),label:"Main Image",accept:"image/*",multiple:!1,"max-size":10*1024*1024,description:"Drag & drop image here or click to browse",error:s(o).errors.image},null,8,["modelValue","error"]),e[32]||(e[32]=t("p",{class:"text-xs text-gray-500 mt-2"}," Upload a single image file. Supported formats: JPG, PNG, GIF. ",-1)),n(d,{message:s(o).errors.image,class:"mt-2"},null,8,["message"])]),t("div",null,[n(i,{value:"Upload Additional Files",class:"mb-2"}),a.contentPost.media&&a.contentPost.media.length>0?(u(),m("div",ke,[e[33]||(e[33]=t("p",{class:"text-sm text-gray-600 mb-2"}," Current Files: ",-1)),t("div",he,[(u(!0),m(x,null,_(a.contentPost.media,r=>(u(),m("div",{key:r.id,class:"flex items-center justify-between p-2 bg-gray-50 rounded border"},[t("div",Pe,[t("span",Ve,p(r.original_name),1),t("span",Ce,"("+p(z(r.file_size))+")",1)]),t("a",{href:r.url,target:"_blank",class:"text-indigo-600 hover:text-indigo-800 text-sm"}," View ",8,Te)]))),128))]),e[34]||(e[34]=t("p",{class:"text-xs text-gray-500 mt-1"}," These files will remain unless you delete them. ",-1))])):w("",!0),n(j,{modelValue:s(o).media,"onUpdate:modelValue":e[19]||(e[19]=r=>s(o).media=r),label:"Additional Files",accept:"image/*,.pdf,.xlsx,.csv",multiple:!0,"max-size":10*1024*1024,description:"Drag & drop files here or click to browse",error:s(o).errors.media},null,8,["modelValue","error"]),e[35]||(e[35]=t("p",{class:"text-xs text-gray-500 mt-2"}," You can upload up to 10 files. Supported formats: JPG, PNG, GIF, PDF, DOC, DOCX, TXT. ",-1)),n(d,{message:s(o).errors.media,class:"mt-2"},null,8,["message"])]),t("div",Se,[t("button",{type:"button",onClick:J,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Cancel "),t("button",{type:"submit",disabled:s(o).processing,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"},p(s(o).processing?"Updating...":"Update Content Post"),9,Ue)])],32)])])])])]),_:1}))}};export{Ee as default};
