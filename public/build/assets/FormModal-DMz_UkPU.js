import{m as x,y as v,d as S,o as a,w as M,e as o,t as c,f as U,r as B,c as n,F as w,z as f,k as m,i as g,g as _,n as p,M as F,p as D,q as z,v as E}from"./app-CMjabVAN.js";import{_ as T}from"./Modal-g7lktb9y.js";const N={class:"bg-white rounded-lg shadow-xl"},j={class:"px-6 py-4 border-b border-gray-200"},A={class:"text-lg font-medium text-gray-900"},W={class:"px-6 py-4"},$={class:"space-y-4"},H=["for"],L={key:0,class:"text-red-500"},O=["type","id","onUpdate:modelValue","required","placeholder","min","max","step"],G=["id","onUpdate:modelValue","required","placeholder","rows"],I=["id","onUpdate:modelValue","required"],J={value:"",disabled:""},K=["value"],P={key:3,class:"mt-2"},Q={class:"inline-flex items-center"},R=["onUpdate:modelValue"],X={class:"ml-2 text-sm text-gray-700"},Y=["id","accept","onChange"],Z={key:5,class:"mt-1 text-sm text-red-600"},ee={class:"px-6 py-4 bg-gray-50 flex justify-end space-x-3"},te=["disabled"],oe=["disabled"],ae={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ie={__name:"FormModal",props:{show:{type:Boolean,default:!1},title:{type:String,required:!0},fields:{type:Array,default:()=>[]},initialData:{type:Object,default:()=>({})},submitText:{type:String,default:"Save"},maxWidth:{type:String,default:"2xl"},loading:{type:Boolean,default:!1}},emits:["close","submit"],setup(r,{expose:k,emit:C}){const u=r,y=C,s=x({}),i=x({}),h=()=>{const l={};u.fields.forEach(d=>{l[d.name]=u.initialData[d.name]||d.default||""}),s.value=l,i.value={}};v(()=>u.initialData,h,{immediate:!0});const b=()=>{u.loading||y("close")},q=()=>{u.loading||y("submit",s.value)},V=(l,d)=>{const e=l.target.files[0];e&&(s.value[d]=e)};return v(()=>u.show,l=>{l&&h()}),k({setErrors:l=>{i.value=l},resetForm:()=>{h()}}),(l,d)=>(a(),S(T,{show:r.show,onClose:b,"max-width":r.maxWidth},{default:M(()=>[o("div",N,[o("div",j,[o("h3",A,c(r.title),1)]),o("form",{onSubmit:U(q,["prevent"])},[o("div",W,[B(l.$slots,"form",{form:s.value,errors:i.value,loading:r.loading},()=>[o("div",$,[(a(!0),n(w,null,f(r.fields,e=>(a(),n("div",{key:e.name},[o("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[_(c(e.label)+" ",1),e.required?(a(),n("span",L,"*")):g("",!0)],8,H),e.type==="text"||e.type==="email"||e.type==="number"||e.type==="date"||e.type==="datetime-local"?m((a(),n("input",{key:0,type:e.type,id:e.name,"onUpdate:modelValue":t=>s.value[e.name]=t,required:e.required,placeholder:e.placeholder,min:e.min,max:e.max,step:e.step,class:p(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",{"border-red-300":i.value[e.name]}])},null,10,O)),[[F,s.value[e.name]]]):e.type==="textarea"?m((a(),n("textarea",{key:1,id:e.name,"onUpdate:modelValue":t=>s.value[e.name]=t,required:e.required,placeholder:e.placeholder,rows:e.rows||3,class:p(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",{"border-red-300":i.value[e.name]}])},null,10,G)),[[D,s.value[e.name]]]):e.type==="select"?m((a(),n("select",{key:2,id:e.name,"onUpdate:modelValue":t=>s.value[e.name]=t,required:e.required,class:p(["mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",{"border-red-300":i.value[e.name]}])},[o("option",J,c(e.placeholder||"Select an option"),1),(a(!0),n(w,null,f(e.options||[],t=>(a(),n("option",{key:t?.value||t,value:t?.value||t},c(t?.label||t),9,K))),128))],10,I)),[[z,s.value[e.name]]]):e.type==="checkbox"?(a(),n("div",P,[o("label",Q,[m(o("input",{type:"checkbox","onUpdate:modelValue":t=>s.value[e.name]=t,class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,8,R),[[E,s.value[e.name]]]),o("span",X,c(e.label),1)])])):e.type==="file"?(a(),n("input",{key:4,id:e.name,type:"file",accept:e.accept,onChange:t=>V(t,e.name),class:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"},null,40,Y)):g("",!0),i.value[e.name]?(a(),n("p",Z,c(i.value[e.name]),1)):g("",!0)]))),128))])])]),o("div",ee,[o("button",{type:"button",onClick:b,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:r.loading}," Cancel ",8,te),o("button",{type:"submit",class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:r.loading},[r.loading?(a(),n("svg",ae,d[0]||(d[0]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):g("",!0),_(" "+c(r.loading?"Saving...":r.submitText),1)],8,oe)])],32)])]),_:3},8,["show","max-width"]))}};export{ie as _};
