import{m as w,j as k,y as P,x as U,d as Y,o as l,w as c,e,c as r,t as n,k as v,p as _,F as C,z as M,q as I,g as j,i as b,a as z,s as m}from"./app-CMjabVAN.js";import{_ as L}from"./AuthenticatedLayout-CrhTxsHO.js";import{D as q,_ as R}from"./Pagination-DWf9cr2q.js";import"./Modal-g7lktb9y.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},G={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},J={class:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-3 border border-blue-100"},K={class:"flex items-center"},Q={class:"ml-4"},X={class:"text-2xl font-bold text-gray-900"},Z={class:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-3 border border-green-100"},ee={class:"flex items-center"},te={class:"ml-4"},se={class:"text-2xl font-bold text-gray-900"},oe={class:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-3 border border-purple-100"},le={class:"flex items-center"},re={class:"ml-4"},ne={class:"text-2xl font-bold text-gray-900"},ie={class:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl p-3 border border-yellow-100"},ae={class:"flex items-center"},de={class:"ml-4"},ue={class:"text-2xl font-bold text-gray-900"},ce={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-8"},me={class:"p-6"},ge={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},pe={class:"lg:col-span-2"},fe={class:"relative"},ve=["value"],be={class:"mt-6 flex flex-col sm:flex-row gap-3 justify-end"},xe=["disabled"],he={key:0,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},ye={class:"animate-pulse space-y-4"},we={class:"space-y-3"},ke={key:1,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center"},_e={key:2,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center"},Ce={key:3,class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},Me={class:"relative"},je={key:0,class:"absolute inset-0 bg-white bg-opacity-50 z-10 flex items-center justify-center"},ze={class:"flex items-center"},Te={class:"flex-shrink-0 h-12 w-12"},Be={key:0,class:"h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden ring-2 ring-white shadow-sm"},Se=["src","alt"],Fe={key:1,class:"h-12 w-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center ring-2 ring-white shadow-sm"},He={class:"text-white font-bold text-sm"},Ve={class:"ml-4"},Ae={class:"font-semibold text-gray-900"},Ne={key:0,class:"text-sm text-gray-500"},De=["href"],$e={key:1,class:"text-gray-400"},Ee={class:"flex items-center"},Oe={key:0,class:"w-4 h-4 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Pe={key:1,class:"text-gray-900"},Ue={key:2,class:"text-gray-400"},Ye={key:0,class:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800"},Ie={key:1,class:"text-gray-400"},Le={class:"flex items-center"},qe={class:"font-semibold text-green-600"},Re={class:"flex items-center"},We={class:"font-semibold text-purple-600"},Ge={class:"border-t border-gray-200"},et={__name:"Index",props:{clients:{type:Object,required:!0},filters:{type:Object,default:()=>({})}},setup(T){const a=T,d=w(!1),i=w({search:a.filters.search||"",category:a.filters.category||"",company:a.filters.company||""}),u=k(()=>a.clients.data||[]),p=k(()=>Object.values(i.value).some(o=>o!=="")),B=[{value:"Consignment Partner",label:"Consignment Partner"},{value:"Direct Buyer",label:"Direct Buyer"},{value:"Wholesale Client",label:"Wholesale Client"},{value:"Retail Customer",label:"Retail Customer"},{value:"Corporate Account",label:"Corporate Account"},{value:"Auction House",label:"Auction House"},{value:"Other",label:"Other"}],S=[{key:"name",label:"Client",sortable:!0},{key:"email",label:"Email",sortable:!0},{key:"phone",label:"Phone",sortable:!0},{key:"company",label:"Company",sortable:!0},{key:"category",label:"Category",sortable:!0},{key:"sales_count",label:"Sales",type:"number",sortable:!0},{key:"content_posts_count",label:"Content Posts",type:"number",sortable:!0}],f=()=>{m.visit("/clients/create")},F=o=>{m.visit(`/clients/${o.id}/edit`)},H=o=>{m.visit(`/clients/${o.id}`)},V=async o=>{if(confirm("Are you sure you want to delete this client? This action cannot be undone."))try{d.value=!0,await m.delete(`/clients/${o.id}`,{preserveScroll:!0,onSuccess:()=>{},onError:t=>{console.error("Error deleting client:",t),t.message?.includes("403")&&alert("You don't have permission to delete this client.")},onFinish:()=>{d.value=!1}})}catch(t){d.value=!1,console.error("Error deleting client:",t)}},A=()=>{clearTimeout(window.searchTimeout),window.searchTimeout=setTimeout(()=>{g()},300)},x=()=>{g()},g=()=>{d.value=!0;const o={};Object.keys(i.value).forEach(t=>{i.value[t]&&(o[t]=i.value[t])}),m.get("/clients",o,{preserveState:!0,preserveScroll:!0,only:["clients","filters"],onError:t=>{console.error("Error applying filters:",t),t.message?.includes("403")&&alert("You don't have permission to view clients.")},onFinish:()=>{d.value=!1}})},h=()=>{i.value={search:"",category:"",company:""},g()},N=o=>{m.visit(o,{preserveState:!0,preserveScroll:!0,only:["clients","filters"]})},D=()=>u.value.reduce((o,t)=>o+(t.sales_count||0),0),$=()=>u.value.reduce((o,t)=>o+(t.content_posts_count||0),0),E=()=>{const o=new Date().getMonth(),t=new Date().getFullYear();return u.value.filter(s=>{const y=new Date(s.created_at);return y.getMonth()===o&&y.getFullYear()===t}).length},O=(o,t)=>`${o?.charAt(0)||""}${t?.charAt(0)||""}`.toUpperCase();return P(i,()=>{clearTimeout(window.filterTimeout),window.filterTimeout=setTimeout(()=>{g()},300)},{deep:!0}),U(()=>{}),(o,t)=>(l(),Y(L,null,{header:c(()=>[e("div",{class:"flex flex-col lg:flex-row lg:justify-between lg:items-start gap-4"},[t[4]||(t[4]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 leading-tight"}," Client Management "),e("p",{class:"mt-1 text-sm text-gray-500"}," Manage your client relationships and track their activities ")],-1)),e("div",{class:"flex flex-col sm:flex-row sm:items-center sm:space-x-3 space-y-2 sm:space-y-0 mt-4 lg:mt-0"},[e("button",{onClick:f,class:"inline-flex items-center justify-center px-4 py-2 bg-indigo-600 border border-transparent rounded-lg font-medium text-sm text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 shadow-sm"},t[3]||(t[3]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),j(" New Client ",-1)]))])])]),default:c(()=>[e("div",W,[e("div",G,[e("div",J,[e("div",K,[t[6]||(t[6]=e("div",{class:"flex-shrink-0"},[e("div",{class:"inline-flex items-center justify-center w-12 h-12 bg-blue-100 rounded-full"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])])],-1)),e("div",Q,[t[5]||(t[5]=e("p",{class:"text-sm font-medium text-blue-600"}," Total Clients ",-1)),e("p",X,n(u.value.length),1)])])]),e("div",Z,[e("div",ee,[t[8]||(t[8]=e("div",{class:"flex-shrink-0"},[e("div",{class:"inline-flex items-center justify-center w-12 h-12 bg-green-100 rounded-full"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])])],-1)),e("div",te,[t[7]||(t[7]=e("p",{class:"text-sm font-medium text-green-600"}," Total Sales ",-1)),e("p",se,n(D()),1)])])]),e("div",oe,[e("div",le,[t[10]||(t[10]=e("div",{class:"flex-shrink-0"},[e("div",{class:"inline-flex items-center justify-center w-12 h-12 bg-purple-100 rounded-full"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])])],-1)),e("div",re,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-purple-600"}," Content Posts ",-1)),e("p",ne,n($()),1)])])]),e("div",ie,[e("div",ae,[t[12]||(t[12]=e("div",{class:"flex-shrink-0"},[e("div",{class:"inline-flex items-center justify-center w-12 h-12 bg-yellow-100 rounded-full"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",de,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-yellow-600"}," New This Month ",-1)),e("p",ue,n(E()),1)])])])]),e("div",ce,[t[19]||(t[19]=e("div",{class:"bg-gradient-to-r from-blue-500 to-purple-600 px-6 py-4"},[e("h2",{class:"text-xl font-semibold text-white"}," Search & Filter ")],-1)),e("div",me,[e("div",ge,[e("div",pe,[t[14]||(t[14]=e("label",{for:"search",class:"block text-sm font-medium text-gray-700 mb-1"}," Search clients ",-1)),e("div",fe,[t[13]||(t[13]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),v(e("input",{id:"search","onUpdate:modelValue":t[0]||(t[0]=s=>i.value.search=s),type:"text",placeholder:"Search by name, email, or company...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm transition-colors duration-200",onInput:A,"aria-describedby":"search-description"},null,544),[[_,i.value.search]])]),t[15]||(t[15]=e("p",{id:"search-description",class:"mt-1 text-xs text-gray-500"}," Search by client name, email, company, or phone ",-1))]),e("div",null,[t[17]||(t[17]=e("label",{for:"category",class:"block text-sm font-medium text-gray-700 mb-1"}," Category ",-1)),v(e("select",{id:"category","onUpdate:modelValue":t[1]||(t[1]=s=>i.value.category=s),class:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",onChange:x},[t[16]||(t[16]=e("option",{value:""},"All Categories",-1)),(l(),r(C,null,M(B,s=>e("option",{key:s.value,value:s.value},n(s.label),9,ve)),64))],544),[[I,i.value.category]])]),e("div",null,[t[18]||(t[18]=e("label",{for:"company",class:"block text-sm font-medium text-gray-700 mb-1"}," Company ",-1)),v(e("input",{id:"company","onUpdate:modelValue":t[2]||(t[2]=s=>i.value.company=s),type:"text",placeholder:"Filter by company",class:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",onChange:x},null,544),[[_,i.value.company]])])]),e("div",be,[e("button",{onClick:h,disabled:!p.value,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200","aria-label":"Clear all filters"}," Clear Filters ",8,xe),e("button",{onClick:g,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 shadow-sm","aria-label":"Apply filters"}," Apply Filters ")])])]),d.value&&u.value.length===0?(l(),r("div",he,[e("div",ye,[t[20]||(t[20]=e("div",{class:"h-4 bg-gray-200 rounded w-1/4"},null,-1)),e("div",we,[(l(),r(C,null,M(5,s=>e("div",{key:s,class:"h-12 bg-gray-200 rounded"})),64))])])])):u.value.length===0&&!p.value?(l(),r("div",ke,[t[22]||(t[22]=e("svg",{class:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),t[23]||(t[23]=e("h3",{class:"mt-2 text-lg font-medium text-gray-900"}," No clients yet ",-1)),t[24]||(t[24]=e("p",{class:"mt-1 text-sm text-gray-500"}," Get started by adding your first client. ",-1)),e("div",{class:"mt-6"},[e("button",{onClick:f,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200","aria-label":"Create new client"},t[21]||(t[21]=[e("svg",{class:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),j(" New Client ",-1)]))])])):u.value.length===0&&p.value?(l(),r("div",_e,[t[25]||(t[25]=e("svg",{class:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),t[26]||(t[26]=e("h3",{class:"mt-2 text-lg font-medium text-gray-900"}," No clients found ",-1)),t[27]||(t[27]=e("p",{class:"mt-1 text-sm text-gray-500"}," Try adjusting your search criteria or clear filters. ",-1)),e("div",{class:"mt-6"},[e("button",{onClick:h,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200","aria-label":"Clear filters"}," Clear Filters ")])])):(l(),r("div",Ce,[t[32]||(t[32]=e("div",{class:"bg-gradient-to-r from-gray-700 to-gray-900 px-6 py-4"},[e("h2",{class:"text-xl font-semibold text-white"}," Clients List ")],-1)),e("div",Me,[d.value?(l(),r("div",je,t[28]||(t[28]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)]))):b("",!0),z(q,{data:u.value,columns:S,filters:[],loading:d.value,onCreate:f,onView:H,onEdit:F,onDelete:V},{name:c(({item:s})=>[e("div",ze,[e("div",Te,[s.profile_image_url?(l(),r("div",Be,[e("img",{src:s.profile_image_url,alt:`${s.first_name} ${s.last_name}`,class:"h-full w-full object-cover"},null,8,Se)])):(l(),r("div",Fe,[e("span",He,n(O(s.first_name,s.last_name)),1)]))]),e("div",Ve,[e("div",Ae,n(s.first_name)+" "+n(s.last_name),1),s.company?(l(),r("div",Ne,n(s.company),1)):b("",!0)])])]),email:c(({item:s})=>[s.email?(l(),r("a",{key:0,href:`mailto:${s.email}`,class:"text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200"},n(s.email),9,De)):(l(),r("span",$e,"N/A"))]),phone:c(({item:s})=>[e("div",Ee,[s.phone?(l(),r("svg",Oe,t[29]||(t[29]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"},null,-1)]))):b("",!0),s.phone?(l(),r("span",Pe,n(s.phone),1)):(l(),r("span",Ue,"N/A"))])]),category:c(({item:s})=>[s.category?(l(),r("span",Ye,n(s.category),1)):(l(),r("span",Ie,"Uncategorized"))]),sales_count:c(({item:s})=>[e("div",Le,[t[30]||(t[30]=e("svg",{class:"w-4 h-4 text-green-500 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)),e("span",qe,n(s.sales_count||0),1)])]),content_posts_count:c(({item:s})=>[e("div",Re,[t[31]||(t[31]=e("svg",{class:"w-4 h-4 text-purple-500 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)),e("span",We,n(s.content_posts_count||0),1)])]),_:1},8,["data","loading"])]),e("div",Ge,[z(R,{links:a.clients.links,from:a.clients.from,to:a.clients.to,total:a.clients.total,onNavigate:N,class:"bg-gray-50 px-6 py-3"},null,8,["links","from","to","total"])])]))])]),_:1}))}};export{et as default};
