import{m as k,j as g,y as j,c as d,o as n,e as s,i as W,t as m,F as M,z as S,d as _,B as U,f as v,g as T,n as z}from"./app-DIXSCgPE.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H=["id","multiple","accept","disabled"],K={class:"upload-content"},O={key:0,class:"upload-prompt"},P={class:"upload-text"},q={class:"text-lg font-medium text-gray-900"},J={class:"text-sm text-gray-500"},Q={class:"text-xs text-gray-400 mt-1"},R={key:1,class:"file-list"},X={class:"file-icon"},Y={class:"file-info"},Z={class:"file-name"},ee={class:"file-size"},te=["onClick","disabled"],se=["disabled"],le={key:0,class:"error-container"},oe={class:"error-messages"},re={__name:"SimpleFileUploader",props:{modelValue:{type:[File,Array],default:null},id:{type:String,default:()=>`file-upload-${Math.random().toString(36).substr(2,9)}`},label:{type:String,default:"Upload files"},description:{type:String,default:"Click or drag files here"},multiple:{type:Boolean,default:!1},accept:{type:String,default:"*"},maxSize:{type:Number,default:10*1024*1024},maxFiles:{type:Number,default:null},disabled:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["update:modelValue","error","change"],setup(r,{emit:V}){const l=r,u=V,x=k(null),h=k(!1),p=k([]),a=g({get:()=>l.multiple?Array.isArray(l.modelValue)?l.modelValue:[]:l.modelValue?[l.modelValue]:[],set:e=>{l.multiple?u("update:modelValue",e):u("update:modelValue",e[0]||null)}}),b=g(()=>a.value.length>0),F=g(()=>l.error||p.value.length>0),I=g(()=>{const e=[];return l.error&&e.push(l.error),e.push(...p.value),e}),w=()=>{l.disabled||x.value?.click()},A=e=>{const t=Array.from(e.target.files);C(t),e.target.value=""},D=e=>{h.value=!1;const t=Array.from(e.dataTransfer.files);C(t)},C=e=>{if(B(),l.disabled)return;const t=[],o=[];if(l.maxFiles&&a.value.length+e.length>l.maxFiles){o.push(`Maximum ${l.maxFiles} files allowed`),p.value=o,u("error",o);return}e.forEach(i=>{const f=$(i);f.length>0?o.push(...f):t.push(i)}),o.length>0&&(p.value=o,u("error",o)),t.length>0&&(l.multiple?a.value=[...a.value,...t]:a.value=[t[0]],u("change",a.value))},$=e=>{const t=[];if(e.size>l.maxSize&&t.push(`File "${e.name}" is too large. Maximum size is ${y(l.maxSize)}`),l.accept!=="*"){const o=l.accept.split(",").map(c=>c.trim().toLowerCase()),f="."+e.name.toLowerCase().split(".").pop();o.some(c=>{if(c.startsWith("."))return c===f;if(c.endsWith("/*")){const N=c.split("/")[0];return e.type.startsWith(N)}else return e.type===c})||t.push(`File "${e.name}" has invalid type. Allowed types: ${l.accept}`)}return t},L=e=>{if(l.disabled)return;const t=[...a.value];t.splice(e,1),a.value=t,u("change",a.value)},B=()=>{p.value=[],u("error",null)},y=e=>{if(e===0)return"0 Bytes";const t=1024,o=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,i)).toFixed(2))+" "+o[i]},E=e=>e.type.startsWith("image/")?"ImageIcon":e.type==="application/pdf"?"DocumentIcon":e.type.includes("sheet")||e.type.includes("excel")?"ChartBarIcon":e.type.includes("text")?"DocumentTextIcon":"PaperClipIcon";return j(()=>l.error,e=>{e&&(p.value=[e])}),(e,t)=>(n(),d("div",{class:z(["file-uploader",{"has-error":F.value}])},[s("div",{class:z(["upload-area",{"drag-over":h.value,"has-files":b.value,disabled:r.disabled}]),onDragover:t[0]||(t[0]=v(o=>h.value=!0,["prevent"])),onDragleave:t[1]||(t[1]=v(o=>h.value=!1,["prevent"])),onDrop:v(D,["prevent"]),onClick:w},[s("input",{ref_key:"fileInput",ref:x,type:"file",id:r.id,multiple:r.multiple,accept:r.accept,disabled:r.disabled,class:"hidden",onChange:A},null,40,H),s("div",K,[b.value?(n(),d("div",R,[(n(!0),d(M,null,S(a.value,(o,i)=>(n(),d("div",{key:i,class:"file-item"},[s("div",X,[(n(),_(U(E(o)),{class:"w-8 h-8"}))]),s("div",Y,[s("p",Z,m(o.name),1),s("p",ee,m(y(o.size)),1)]),s("button",{onClick:v(f=>L(i),["stop"]),class:"remove-btn",disabled:r.disabled,type:"button"},t[3]||(t[3]=[s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,te)]))),128)),s("button",{onClick:v(w,["stop"]),class:"add-more-btn",disabled:r.disabled||r.maxFiles&&a.value.length>=r.maxFiles,type:"button"},[t[4]||(t[4]=s("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)),T(" Add "+m(r.multiple?"more files":"different file"),1)],8,se)])):(n(),d("div",O,[t[2]||(t[2]=s("div",{class:"upload-icon"},[s("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})])],-1)),s("div",P,[s("p",q,m(r.label),1),s("p",J,m(r.description),1),s("p",Q," Maximum file size: "+m(y(r.maxSize)),1)])]))])],34),F.value?(n(),d("div",le,[t[6]||(t[6]=s("div",{class:"error-icon"},[s("svg",{class:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),s("div",oe,[(n(!0),d(M,null,S(I.value,(o,i)=>(n(),d("div",{key:i,class:"error-message"},m(o),1))),128))]),s("button",{onClick:B,class:"clear-errors",type:"button"},t[5]||(t[5]=[s("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])):W("",!0)],2))}},de=G(re,[["__scopeId","data-v-84621b57"]]);export{de as S};
