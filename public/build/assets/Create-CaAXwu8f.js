import{b as Y,j as U,m as v,d as J,o as i,w as x,e as o,f as _,a as l,n,u as t,k as m,p as q,q as c,c as u,F as k,z as w,t as f,i as C,g as N,A as G,v as W,s as j}from"./app-DIXSCgPE.js";import{_ as Q}from"./AuthenticatedLayout-_5prmJNd.js";import{_ as d,a as h,b as g}from"./TextInput-CeUe0YzA.js";import{P as Z}from"./PrimaryButton-BpK5XikL.js";import{_ as ee}from"./SecondaryButton-DWTF-xNx.js";import{F as oe}from"./FileUpload-DBm0umav.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const se={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},te={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},re={class:"p-6 text-gray-900"},le={class:"border-b border-gray-200 pb-6"},ae={class:"mt-4"},ie={class:"border-b border-gray-200 pb-6"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},de={class:"border-b border-gray-200 pb-6"},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ge=["value"],me=["value"],pe={class:"border-b border-gray-200 pb-6"},ce={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ve={class:"border-b border-gray-200 pb-6"},fe={class:"mt-1"},be={class:"relative"},ye=["onClick"],xe=["disabled"],_e=["disabled"],ke={key:0,class:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 p-2"},we={class:"text-sm text-gray-600 flex items-center justify-between"},Ce={class:"font-medium text-indigo-600 bg-indigo-50 px-2 py-1 rounded"},he={key:0,class:"mt-1 p-2 bg-gray-50 border border-gray-200 rounded-md"},Te={class:"flex flex-wrap gap-1"},Ve=["onClick","onKeydown"],Se={class:"mt-4"},Fe={class:"border-b border-gray-200 pb-6"},De={class:"border-b border-gray-200 pb-6"},Pe={class:"space-y-4"},Ue={class:"flex items-center"},qe={key:0},Me={class:"flex items-center justify-end space-x-3 pt-6"},Be={key:0},Ie={key:1},Oe={__name:"Create",props:{users:{type:Array,default:()=>[]},goals:{type:Array,default:()=>[]}},setup(K){const M=K,s=Y({title:"",description:"",priority:"medium",status:"pending",due_date:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],assigned_to:"",category:"",estimated_hours:null,actual_hours:null,tags:[],notes:"",parent_task_id:null,related_goal_id:"",is_recurring:!1,recurring_frequency:"",media:[]}),O=U(()=>M.users),R=U(()=>M.goals),p=v(""),T=v(null),V=v(!1),b=v(""),B=v(["urgent","important","follow-up","review","meeting","documentation"]),S=U(()=>Array.isArray(s.tags)?s.tags.filter(a=>a&&a.trim()):[]),z=()=>{T.value&&T.value.focus()},I=()=>{const a=p.value.trim();b.value=a},A=a=>{const e=p.value.trim();a.key==="Enter"||a.key===","||a.keyCode===188?(a.preventDefault(),e&&F(e)):a.key==="Backspace"&&!e&&S.value.length>0&&(a.preventDefault(),E(S.value.length-1))},$=a=>{a?.preventDefault?.(),a?.stopPropagation?.();const e=p.value.trim();e&&F(e)},F=a=>{if(!a)return;const e=a.trim();e&&(s.tags.includes(e)||s.tags.push(e),p.value="",b.value="")},E=a=>{a>=0&&a<s.tags.length&&s.tags.splice(a,1)},D=a=>{F(a)},H=a=>{console.error("File upload error:",a)},L=()=>{s.post(route("tasks.web.store"),{forceFormData:!0,onSuccess:()=>{j.visit(route("tasks.web.index"))},onError:a=>{console.error("Form errors:",a)}})},X=()=>{j.visit(route("tasks.web.index"))};return(a,e)=>(i(),J(Q,null,{header:x(()=>e[20]||(e[20]=[o("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Create New Task ",-1)])),default:x(()=>[o("div",null,[o("div",se,[o("div",te,[o("div",re,[o("form",{onSubmit:_(L,["prevent"]),class:"space-y-6"},[o("div",le,[e[21]||(e[21]=o("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Basic Information ",-1)),o("div",null,[l(d,{for:"title",value:"Title *"}),l(h,{id:"title",modelValue:t(s).title,"onUpdate:modelValue":e[0]||(e[0]=r=>t(s).title=r),type:"text",class:n(["mt-1 block w-full",{"border-red-500":t(s).errors.title}]),required:"",autofocus:""},null,8,["modelValue","class"]),l(g,{message:t(s).errors.title,class:"mt-2"},null,8,["message"])]),o("div",ae,[l(d,{for:"description",value:"Description *"}),m(o("textarea",{id:"description","onUpdate:modelValue":e[1]||(e[1]=r=>t(s).description=r),class:n(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":t(s).errors.description}]),rows:"4",required:""},null,2),[[q,t(s).description]]),l(g,{message:t(s).errors.description,class:"mt-2"},null,8,["message"])])]),o("div",ie,[e[25]||(e[25]=o("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Task Details ",-1)),o("div",ne,[o("div",null,[l(d,{for:"priority",value:"Priority *"}),m(o("select",{id:"priority","onUpdate:modelValue":e[2]||(e[2]=r=>t(s).priority=r),class:n(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":t(s).errors.priority}]),required:""},e[22]||(e[22]=[o("option",{value:""}," Select Priority ",-1),o("option",{value:"low"},"Low",-1),o("option",{value:"medium"}," Medium ",-1),o("option",{value:"high"},"High",-1),o("option",{value:"urgent"}," Urgent ",-1)]),2),[[c,t(s).priority]]),l(g,{message:t(s).errors.priority,class:"mt-2"},null,8,["message"])]),o("div",null,[l(d,{for:"status",value:"Status *"}),m(o("select",{id:"status","onUpdate:modelValue":e[3]||(e[3]=r=>t(s).status=r),class:n(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":t(s).errors.status}]),required:""},e[23]||(e[23]=[o("option",{value:""}," Select Status ",-1),o("option",{value:"pending"}," Pending ",-1),o("option",{value:"not_started"}," Not Started ",-1),o("option",{value:"in_progress"}," In Progress ",-1),o("option",{value:"completed"}," Completed ",-1),o("option",{value:"cancelled"}," Cancelled ",-1)]),2),[[c,t(s).status]]),l(g,{message:t(s).errors.status,class:"mt-2"},null,8,["message"])]),o("div",null,[l(d,{for:"due_date",value:"Due Date *"}),l(h,{id:"due_date",modelValue:t(s).due_date,"onUpdate:modelValue":e[4]||(e[4]=r=>t(s).due_date=r),type:"date",class:n(["mt-1 block w-full",{"border-red-500":t(s).errors.due_date}]),required:""},null,8,["modelValue","class"]),l(g,{message:t(s).errors.due_date,class:"mt-2"},null,8,["message"])]),o("div",null,[l(d,{for:"category",value:"Category"}),m(o("select",{id:"category","onUpdate:modelValue":e[5]||(e[5]=r=>t(s).category=r),class:n(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":t(s).errors.category}])},e[24]||(e[24]=[o("option",{value:""}," Select Category ",-1),o("option",{value:"Inventory Management"}," Inventory Management ",-1),o("option",{value:"Client Communication"}," Client Communication ",-1),o("option",{value:"Sales Processing"}," Sales Processing ",-1),o("option",{value:"Content Creation"}," Content Creation ",-1),o("option",{value:"Expense Tracking"}," Expense Tracking ",-1),o("option",{value:"Goal Planning"}," Goal Planning ",-1),o("option",{value:"System Maintenance"}," System Maintenance ",-1),o("option",{value:"Other"},"Other",-1)]),2),[[c,t(s).category]]),l(g,{message:t(s).errors.category,class:"mt-2"},null,8,["message"])])])]),o("div",de,[e[28]||(e[28]=o("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Assignment ",-1)),o("div",ue,[o("div",null,[l(d,{for:"assigned_to",value:"Assigned To"}),m(o("select",{id:"assigned_to","onUpdate:modelValue":e[6]||(e[6]=r=>t(s).assigned_to=r),class:n(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":t(s).errors.assigned_to}])},[e[26]||(e[26]=o("option",{value:""},"Unassigned",-1)),(i(!0),u(k,null,w(O.value,r=>(i(),u("option",{key:r.id,value:r.id},f(r.name),9,ge))),128))],2),[[c,t(s).assigned_to]]),l(g,{message:t(s).errors.assigned_to,class:"mt-2"},null,8,["message"])]),o("div",null,[l(d,{for:"related_goal_id",value:"Related Goal"}),m(o("select",{id:"related_goal_id","onUpdate:modelValue":e[7]||(e[7]=r=>t(s).related_goal_id=r),class:n(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":t(s).errors.related_goal_id}])},[e[27]||(e[27]=o("option",{value:""},"No Goal",-1)),(i(!0),u(k,null,w(R.value,r=>(i(),u("option",{key:r.id,value:r.id},f(r.title),9,me))),128))],2),[[c,t(s).related_goal_id]]),l(g,{message:t(s).errors.related_goal_id,class:"mt-2"},null,8,["message"])])])]),o("div",pe,[e[29]||(e[29]=o("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Time Tracking ",-1)),o("div",ce,[o("div",null,[l(d,{for:"estimated_hours",value:"Estimated Hours"}),l(h,{id:"estimated_hours",modelValue:t(s).estimated_hours,"onUpdate:modelValue":e[8]||(e[8]=r=>t(s).estimated_hours=r),type:"number",step:"0.5",min:"0",class:n(["mt-1 block w-full",{"border-red-500":t(s).errors.estimated_hours}])},null,8,["modelValue","class"]),l(g,{message:t(s).errors.estimated_hours,class:"mt-2"},null,8,["message"])]),o("div",null,[l(d,{for:"actual_hours",value:"Actual Hours"}),l(h,{id:"actual_hours",modelValue:t(s).actual_hours,"onUpdate:modelValue":e[9]||(e[9]=r=>t(s).actual_hours=r),type:"number",step:"0.5",min:"0",class:n(["mt-1 block w-full",{"border-red-500":t(s).errors.actual_hours}])},null,8,["modelValue","class"]),l(g,{message:t(s).errors.actual_hours,class:"mt-2"},null,8,["message"])])])]),o("div",ve,[e[35]||(e[35]=o("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Additional Details ",-1)),o("div",null,[l(d,{for:"tags",value:"Tags"}),o("div",fe,[o("div",be,[o("div",{class:n(["flex flex-wrap items-center gap-2 p-2 border border-gray-300 rounded-md shadow-sm focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 min-h-12 transition-colors",{"border-red-500":t(s).errors.tags,"bg-gray-50":V.value}]),onClick:z},[(i(!0),u(k,null,w(S.value,(r,y)=>(i(),u("span",{key:y,class:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800 border border-indigo-200 transition-all hover:bg-indigo-200 hover:scale-105"},[N(f(r.trim())+" ",1),o("button",{type:"button",onClick:_(P=>E(y),["stop"]),class:"text-indigo-600 hover:text-indigo-800 focus:outline-none transition-colors",title:"Remove tag"},e[30]||(e[30]=[o("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,ye)]))),128)),m(o("input",{ref_key:"tagInputRef",ref:T,type:"text","onUpdate:modelValue":e[10]||(e[10]=r=>p.value=r),onKeydown:e[11]||(e[11]=(...r)=>A&&A(...r)),onFocus:e[12]||(e[12]=r=>V.value=!0),onBlur:e[13]||(e[13]=r=>V.value=!1),onInput:e[14]||(e[14]=(...r)=>I&&I(...r)),placeholder:"Type to add tags...",class:n(["flex-1 min-w-0 bg-transparent border-none outline-none py-1 px-2 text-sm placeholder-gray-400",{"opacity-50":t(s).processing}]),disabled:t(s).processing},null,42,xe),[[q,p.value]]),p.value.trim()?(i(),u("button",{key:0,type:"button",onClick:e[15]||(e[15]=_((...r)=>$&&$(...r),["prevent","stop"])),class:"text-indigo-600 hover:text-indigo-800 focus:outline-none transition-colors p-1 rounded",title:"Add tag",disabled:t(s).processing},e[31]||(e[31]=[o("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)]),8,_e)):C("",!0)],2),b.value?(i(),u("div",ke,[o("div",we,[e[32]||(e[32]=o("span",null,"Press Enter or Comma to add:",-1)),o("span",Ce,f(b.value),1)])])):C("",!0)]),B.value.length>0?(i(),u("div",he,[e[33]||(e[33]=o("p",{class:"text-xs text-gray-500 mb-1"}," Common tags: ",-1)),o("div",Te,[(i(!0),u(k,null,w(B.value,(r,y)=>(i(),u("span",{key:y,onClick:P=>D(r),class:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors cursor-pointer inline-block",role:"button",tabindex:"0",onKeydown:[G(P=>D(r),["enter"]),G(_(P=>D(r),["prevent"]),["space"])]},f(r),41,Ve))),128))])])):C("",!0),e[34]||(e[34]=o("p",{class:"mt-1 text-xs text-gray-500"}," Press Enter or Comma to add tags. ",-1))]),l(g,{message:t(s).errors.tags,class:"mt-2"},null,8,["message"])]),o("div",Se,[l(d,{for:"notes",value:"Notes"}),m(o("textarea",{id:"notes","onUpdate:modelValue":e[16]||(e[16]=r=>t(s).notes=r),class:n(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":t(s).errors.notes}]),rows:"3"},null,2),[[q,t(s).notes]]),l(g,{message:t(s).errors.notes,class:"mt-2"},null,8,["message"])])]),o("div",Fe,[e[37]||(e[37]=o("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," File Attachments ",-1)),o("div",null,[l(d,{value:"Upload Files",class:"mb-2"}),l(oe,{modelValue:t(s).media,"onUpdate:modelValue":e[17]||(e[17]=r=>t(s).media=r),multiple:!0,accept:"image/*,.pdf,.doc,.docx,.txt",maxFiles:10,maxSize:10*1024*1024,title:"Drag & drop files here or click to browse",description:"Supports images, PDFs, and documents (max 10MB each)",onError:H},null,8,["modelValue"]),l(g,{message:t(s).errors.media,class:"mt-2"},null,8,["message"]),e[36]||(e[36]=o("p",{class:"text-xs text-gray-500 mt-2"}," You can upload up to 10 files. Supported formats: JPG, PNG, GIF, PDF, DOC, DOCX, TXT. ",-1))])]),o("div",De,[e[39]||(e[39]=o("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Recurring Task ",-1)),o("div",Pe,[o("div",Ue,[m(o("input",{id:"is_recurring","onUpdate:modelValue":e[18]||(e[18]=r=>t(s).is_recurring=r),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[W,t(s).is_recurring]]),l(d,{for:"is_recurring",value:"This is a recurring task",class:"ml-2"})]),t(s).is_recurring?(i(),u("div",qe,[l(d,{for:"recurring_frequency",value:"Frequency"}),m(o("select",{id:"recurring_frequency","onUpdate:modelValue":e[19]||(e[19]=r=>t(s).recurring_frequency=r),class:n(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":t(s).errors.recurring_frequency}])},e[38]||(e[38]=[o("option",{value:""}," Select Frequency ",-1),o("option",{value:"daily"},"Daily",-1),o("option",{value:"weekly"}," Weekly ",-1),o("option",{value:"monthly"}," Monthly ",-1),o("option",{value:"yearly"}," Yearly ",-1)]),2),[[c,t(s).recurring_frequency]]),l(g,{message:t(s).errors.recurring_frequency,class:"mt-2"},null,8,["message"])])):C("",!0)])]),o("div",Me,[l(ee,{type:"button",onClick:X,disabled:t(s).processing},{default:x(()=>e[40]||(e[40]=[N(" Cancel ",-1)])),_:1,__:[40]},8,["disabled"]),l(Z,{type:"submit",disabled:t(s).processing,class:n({"opacity-50":t(s).processing})},{default:x(()=>[t(s).processing?(i(),u("span",Be,"Creating...")):(i(),u("span",Ie,"Create Task"))]),_:1},8,["disabled","class"])])],32)])])])])]),_:1}))}};export{Oe as default};
