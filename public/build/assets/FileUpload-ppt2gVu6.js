import{m as g,y as b,c as d,o as m,e as s,i as x,t as u,f as k,n as D,F as $,z as L}from"./app-BT7s3W82.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"file-upload-container"},j=["multiple","accept"],E={class:"mt-4"},N={class:"text-sm font-medium text-gray-900"},U={class:"text-xs text-gray-500 mt-1"},W={key:0,class:"text-xs text-red-600 mt-1"},G={key:0,class:"mt-4 space-y-3"},K={class:"flex items-center space-x-3"},P={class:"flex-shrink-0"},R={class:"w-10 h-10 flex items-center justify-center rounded bg-gray-200"},T={class:"text-xs font-medium text-gray-600"},q={class:"min-w-0 flex-1"},H={class:"text-sm font-medium text-gray-900 truncate"},J={class:"text-xs text-gray-500"},O=["onClick"],Q={key:1,class:"mt-2 text-xs text-orange-600"},X={__name:"FileUpload",props:{modelValue:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!0},accept:{type:String,default:"image/*,.pdf,.doc,.docx,.txt"},maxFiles:{type:Number,default:null},maxSize:{type:Number,default:10*1024*1024},title:{type:String,default:"Drag & drop files here"},description:{type:String,default:"or click to browse files"}},emits:["update:modelValue","error"],setup(i,{expose:_,emit:w}){const l=i,p=w,v=g(null),f=g(!1),a=g(""),r=g([]);b(()=>l.modelValue,t=>{Array.isArray(t)?r.value=t:r.value=[]},{immediate:!0}),b(r,t=>{p("update:modelValue",t)});const C=()=>{l.maxFiles&&r.value.length>=l.maxFiles||v.value?.click()},B=t=>{const e=Array.from(t.target.files);h(e),t.target.value=""},M=t=>{f.value=!1;const e=Array.from(t.dataTransfer.files);h(e)},h=t=>{if(l.maxFiles&&r.value.length+t.length>l.maxFiles){a.value=`Cannot select more than ${l.maxFiles} files`,p("error",a.value);return}const e=t.filter(o=>{if(o.size>l.maxSize)return a.value=`File "${o.name}" exceeds maximum size of ${y(l.maxSize)}`,p("error",a.value),!1;if(l.accept&&l.accept!=="*"){const n=l.accept.split(",").map(c=>c.trim()),F="."+o.name.split(".").pop().toLowerCase();if(!n.some(c=>{if(c.startsWith("."))return c.toLowerCase()===F;if(c.endsWith("/*")){const A=c.split("/")[0];return o.type.startsWith(A)}return c===o.type}))return a.value=`File type not allowed: ${o.name}`,p("error",a.value),!1}return!0});e.length>0&&(a.value="",r.value=[...r.value,...e])},z=t=>{r.value.splice(t,1)},S=t=>{const e=t.split(".");return e.length>1?e.pop().toUpperCase().substring(0,3):"FILE"},y=t=>{if(t===0)return"0 Bytes";const e=1024,o=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,n)).toFixed(2))+" "+o[n]};return _({clearFiles:()=>{r.value=[],a.value=""},getFiles:()=>r.value}),(t,e)=>(m(),d("div",V,[s("input",{type:"file",ref_key:"fileInput",ref:v,multiple:i.multiple,accept:i.accept,onChange:B,class:"hidden"},null,40,j),s("div",{class:D(["border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer transition-colors hover:border-indigo-400 hover:bg-indigo-50",{"border-indigo-500 bg-indigo-50":f.value,"border-red-500":a.value}]),onClick:C,onDragover:e[0]||(e[0]=k(o=>f.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=o=>f.value=!1),onDrop:k(M,["prevent"])},[e[2]||(e[2]=s("div",{class:"mx-auto h-12 w-12 text-gray-400"},[s("svg",{class:"h-12 w-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})])],-1)),s("div",E,[s("p",N,u(i.title),1),s("p",U,u(i.description),1),a.value?(m(),d("p",W,u(a.value),1)):x("",!0)]),e[3]||(e[3]=s("button",{type:"button",class:"mt-4 inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-md font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Select Files ",-1))],34),r.value.length>0?(m(),d("div",G,[(m(!0),d($,null,L(r.value,(o,n)=>(m(),d("div",{key:o.name+n,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border"},[s("div",K,[s("div",P,[s("div",R,[s("span",T,u(S(o.name)),1)])]),s("div",q,[s("p",H,u(o.name),1),s("p",J,u(y(o.size)),1)])]),s("button",{type:"button",onClick:F=>z(n),class:"ml-3 text-red-600 hover:text-red-800",title:"Remove file"},e[4]||(e[4]=[s("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,O)]))),128))])):x("",!0),i.maxFiles&&r.value.length>=i.maxFiles?(m(),d("p",Q," Maximum "+u(i.maxFiles)+" file(s) allowed ",1)):x("",!0)]))}},te=I(X,[["__scopeId","data-v-f71eb1e2"]]);export{te as F};
