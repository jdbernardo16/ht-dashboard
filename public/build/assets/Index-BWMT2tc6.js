import{m as c,j as J,s as Q,d as R,o as p,w as o,e as s,a as f,g as S,t as d,n as P,c as b,F as X,y as Z,D as ee,q as r}from"./app-DMsrlBw0.js";import{_ as te,c as ae}from"./AuthenticatedLayout-CoyhxnNm.js";import{_ as le,a as se}from"./Pagination-CBc77TNp.js";import{_ as oe}from"./FormModal-C8My_P34.js";import{_ as re}from"./SearchFilter-CfrCYFaO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-Dm6rggBr.js";const ne={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},ie={class:"flex justify-center"},ce={key:0,class:"w-12 h-12 rounded-lg overflow-hidden border border-gray-200"},de=["src","alt"],ue={key:1,class:"w-12 h-12 rounded-lg bg-gray-100 border border-gray-200 flex items-center justify-center"},pe={class:"font-medium text-gray-900"},me={class:"flex flex-wrap gap-1"},xe={__name:"Index",props:{contentPosts:{type:Object,required:!0},filters:{type:Object,default:()=>({})}},setup(u){const n=u,v=c([]),g=c(!1),_=c(!1),y=c(!1),h=c({}),i=c({search:n.filters.search||"",status:n.filters.status||"",content_type:n.filters.content_type||"",platform:n.filters.platform||"",date_from:n.filters.date_from||"",date_to:n.filters.date_to||""}),T=J(()=>n.contentPosts.data||[]),M=[{key:"id",label:"ID",sortable:!0},{key:"image",label:"Image",sortable:!1},{key:"title",label:"Title",sortable:!0},{key:"platform",label:"Platforms",sortable:!0},{key:"content_type",label:"Type",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"scheduled_date",label:"Scheduled",type:"date",sortable:!0},{key:"user",label:"Author",sortable:!0}],x=[{value:"draft",label:"Draft"},{value:"published",label:"Published"},{value:"scheduled",label:"Scheduled"}],w=[{value:"blog",label:"Blog"},{value:"social_media",label:"Social Media"},{value:"email",label:"Email"},{value:"newsletter",label:"Newsletter"}],q=[{value:"facebook",label:"Facebook"},{value:"instagram",label:"Instagram"},{value:"twitter",label:"Twitter"},{value:"linkedin",label:"LinkedIn"},{value:"youtube",label:"YouTube"},{value:"tiktok",label:"TikTok"},{value:"website",label:"Website"},{value:"other",label:"Other"}],k=[{name:"title",label:"Title",type:"text",required:!0},{name:"content",label:"Content",type:"textarea",required:!0,rows:5},{name:"type",label:"Type",type:"select",required:!0,options:w},{name:"status",label:"Status",type:"select",required:!0,options:x},{name:"category_id",label:"Category",type:"select",required:!1,options:[]},{name:"scheduled_at",label:"Scheduled Date",type:"datetime-local",required:!1},{name:"tags",label:"Tags",type:"text",required:!1,placeholder:"Enter tags separated by commas"},{name:"meta_description",label:"Meta Description",type:"textarea",required:!1,rows:2},{name:"seo_keywords",label:"SEO Keywords",type:"text",required:!1,placeholder:"Enter keywords separated by commas"},{name:"image",label:"Upload Image",type:"file",required:!1,accept:"image/*"}],A=[{value:"draft",label:"Draft"},{value:"published",label:"Published"},{value:"scheduled",label:"Scheduled"}],E=()=>{const e={};Object.keys(i.value).forEach(a=>{i.value[a]&&(e[a]=i.value[a])}),r.get("/content",e,{preserveState:!0,preserveScroll:!0,only:["contentPosts","filters"],onError:a=>{console.error("Error fetching content:",a)}})},F=async()=>{try{const e=await ee.get("/api/categories",{headers:ae(),withCredentials:!0});v.value=e.data.data;const a=k.find(t=>t.name==="category_id");a&&(a.options=v.value.map(t=>({value:t.id,label:t.name})))}catch(e){console.error("Error fetching categories:",e)}},j=()=>{r.visit("/content/create")},$=e=>{r.visit(`/content/${e.id}/edit`)},O=e=>{r.visit(`/content/${e.id}`)},I=async e=>{if(confirm("Are you sure you want to delete this content post?"))try{await r.delete(`/content/${e.id}`),r.reload({only:["contentPosts"]})}catch(a){console.error("Error deleting content:",a)}},L=async e=>{g.value=!0;try{const a=new FormData;Object.keys(e).forEach(l=>{e[l]instanceof File?a.append(l,e[l]):Array.isArray(e[l])?e[l].forEach((K,G)=>{a.append(`${l}[${G}]`,K)}):a.append(l,e[l]||"")});const t=y.value?`/content/${h.value.id}`:"/content",m=y.value?"put":"post";await r[m](t,a,{headers:{"Content-Type":"multipart/form-data"},preserveScroll:!0,onSuccess:()=>{C(),r.reload({only:["contentPosts"]})},onError:l=>{formModal.value&&formModal.value.setErrors(l),console.error("Error saving content:",l)}})}catch(a){console.error("Error submitting form:",a)}finally{g.value=!1}},C=()=>{_.value=!1,h.value={},formModal.value&&formModal.value.resetForm()},D=()=>{i.value={search:"",status:"",content_type:"",platform:"",date_from:"",date_to:""},E()},V=e=>{r.visit(e,{preserveState:!0,preserveScroll:!0,only:["contentPosts","filters"]})},B=e=>new Date(e).toLocaleDateString(),N=e=>e.charAt(0).toUpperCase()+e.slice(1).replace("_"," "),U=e=>({website:"Website",facebook:"Facebook",instagram:"Instagram",twitter:"Twitter",linkedin:"LinkedIn",tiktok:"TikTok",youtube:"YouTube",pinterest:"Pinterest",email:"Email",other:"Other"})[e]||e.charAt(0).toUpperCase()+e.slice(1),z=e=>e.charAt(0).toUpperCase()+e.slice(1).replace("_"," "),H=e=>({draft:"bg-gray-100 text-gray-800",published:"bg-green-100 text-green-800",scheduled:"bg-blue-100 text-blue-800"})[e]||"bg-gray-100 text-gray-800",W=e=>({blog:"bg-purple-100 text-purple-800",social_media:"bg-blue-100 text-blue-800",email:"bg-green-100 text-green-800",newsletter:"bg-orange-100 text-orange-800"})[e]||"bg-gray-100 text-gray-800",Y=e=>{e.target.style.display="none",e.target.parentElement.innerHTML=`
        <div class="w-12 h-12 rounded-lg bg-gray-100 border border-gray-200 flex items-center justify-center">
            <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
            </svg>
        </div>
    `};return Q(()=>{F()}),(e,a)=>(p(),R(te,null,{header:o(()=>a[1]||(a[1]=[s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Content Management ",-1)])),default:o(()=>[s("div",null,[s("div",ne,[f(re,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=t=>i.value=t),filters:["search","status","content_type","platform","date"],"status-options":x,"type-options":w,"platform-options":q,onApply:E,onClear:D},null,8,["modelValue"]),f(le,{data:T.value,columns:M,filters:A,onCreate:j,onView:O,onEdit:$,onDelete:I},{image:o(({item:t})=>[s("div",ie,[t.image?(p(),b("div",ce,[s("img",{src:t.image,alt:t.title,class:"w-full h-full object-cover",onError:Y},null,40,de)])):(p(),b("div",ue,a[2]||(a[2]=[s("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])))])]),title:o(({item:t})=>[s("div",pe,d(t.title),1)]),platform:o(({item:t})=>[s("div",me,[(p(!0),b(X,null,Z(Array.isArray(t.platform)?t.platform:[t.platform],m=>(p(),b("span",{key:m,class:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full"},d(U(m)),1))),128))])]),content_type:o(({item:t})=>[s("span",{class:P([W(t.content_type),"px-2 py-1 text-xs font-medium rounded-full"])},d(z(t.content_type)),3)]),status:o(({item:t})=>[s("span",{class:P([H(t.status),"px-2 py-1 text-xs font-medium rounded-full"])},d(N(t.status)),3)]),scheduled_date:o(({item:t})=>[S(d(t.scheduled_date?B(t.scheduled_date):"N/A"),1)]),user:o(({item:t})=>[S(d(t.user?.name||"System"),1)]),_:1},8,["data"]),f(se,{links:u.contentPosts.links,from:u.contentPosts.from,to:u.contentPosts.to,total:u.contentPosts.total,onNavigate:V},null,8,["links","from","to","total"])])]),f(oe,{show:_.value,title:y.value?"Edit Content":"Create New Content",fields:k,"initial-data":h.value,loading:g.value,onClose:C,onSubmit:L,ref:"formModal"},null,8,["show","title","initial-data","loading"])]),_:1}))}};export{xe as default};
