import{m as g,j as p,y as F,D as E,c as d,o as u,e as i,i as k,f,t as c,g as O,n as H,F as T,z as A}from"./app-CxJ0vpa7.js";/* empty css                                                                      */import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G=["id","accept","disabled"],K={class:"upload-content"},q={key:0,class:"image-preview group"},J=["src","alt"],Q={class:"image-overlay"},X=["disabled"],Y=["disabled"],Z={key:0,class:"image-info"},ee={class:"image-name"},te={class:"image-details"},ae={key:0},ie={key:1,class:"upload-prompt"},se={class:"upload-text"},le={class:"text-lg font-medium text-gray-900"},re={class:"text-sm text-gray-500"},oe={class:"text-xs text-gray-400 mt-1"},ne={key:0,class:"text-xs text-gray-400"},de={key:0,class:"error-container"},ue={class:"error-messages"},ce={__name:"ImageUploader",props:{modelValue:{type:[File,String,null],default:null},id:{type:String,default:()=>`image-upload-${Math.random().toString(36).substr(2,9)}`},label:{type:String,default:"Upload image"},description:{type:String,default:"Click or drag image here"},accept:{type:String,default:"image/*"},maxSize:{type:Number,default:10*1024*1024},maxWidth:{type:Number,default:4e3},maxHeight:{type:Number,default:4e3},minWidth:{type:Number,default:100},minHeight:{type:Number,default:100},disabled:{type:Boolean,default:!1},error:{type:String,default:null},previewUrl:{type:String,default:null}},emits:["update:modelValue","error","change","image-loaded"],setup(o,{emit:S}){const a=o,n=S,w=g(null),x=g(!1),m=g([]),l=g(null),s=g(null),L=p(()=>a.modelValue instanceof File||a.previewUrl||s.value),U=p(()=>a.previewUrl?a.previewUrl:s.value?s.value:null),$=p(()=>l.value?.name||"Uploaded image"),M=p(()=>a.error||m.value.length>0),B=p(()=>{const t=[];return a.error&&t.push(a.error),t.push(...m.value),t}),z=p(()=>a.minWidth&&a.minHeight&&a.maxWidth&&a.maxHeight?`Dimensions: ${a.minWidth}×${a.minHeight} to ${a.maxWidth}×${a.maxHeight} pixels`:null),W=()=>{a.disabled||w.value?.click()},I=t=>{const e=t.target.files[0];e&&_(e),t.target.value=""},V=t=>{x.value=!1;const e=t.dataTransfer.files[0];e&&_(e)},_=t=>{if(C(),a.disabled)return;const e=R(t);if(e.length>0){m.value=e,n("error",e);return}l.value={name:t.name,size:t.size,type:t.type},s.value&&URL.revokeObjectURL(s.value),s.value=URL.createObjectURL(t),n("update:modelValue",t),n("change",t)},R=t=>{const e=[];return t.type.startsWith("image/")?(t.size>a.maxSize&&e.push(`File "${t.name}" is too large. Maximum size is ${y(a.maxSize)}`),a.accept!=="image/*"&&a.accept!=="*"&&(a.accept.split(",").map(v=>v.trim().toLowerCase()).some(v=>{if(v.startsWith(".")){const b="."+t.name.split(".").pop().toLowerCase();return v===b}else if(v.endsWith("/*")){const b=v.split("/")[0];return t.type.startsWith(b)}else return t.type===v})||e.push(`File "${t.name}" has invalid type. Allowed types: ${a.accept}`)),e):(e.push("The selected file is not an image."),e)},j=()=>{a.disabled||(s.value&&(URL.revokeObjectURL(s.value),s.value=null),l.value=null,n("update:modelValue",null),n("change",null))},C=()=>{m.value=[],n("error",null)},D=t=>{const e=t.target;l.value&&(l.value.dimensions={width:e.naturalWidth,height:e.naturalHeight});const r=[];(e.naturalWidth<a.minWidth||e.naturalHeight<a.minHeight)&&r.push(`Image dimensions are too small. Minimum size is ${a.minWidth}×${a.minHeight} pixels.`),(e.naturalWidth>a.maxWidth||e.naturalHeight>a.maxHeight)&&r.push(`Image dimensions are too large. Maximum size is ${a.maxWidth}×${a.maxHeight} pixels.`),r.length>0&&(m.value=r,n("error",r)),n("image-loaded",{width:e.naturalWidth,height:e.naturalHeight,file:a.modelValue})},N=()=>{m.value=["Failed to load image preview."],n("error",["Failed to load image preview."])},y=t=>{if(t===0)return"0 Bytes";const e=1024,r=["Bytes","KB","MB","GB"],h=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,h)).toFixed(2))+" "+r[h]};return F(()=>a.error,t=>{t&&(m.value=[t])}),F(()=>a.modelValue,t=>{t||(s.value&&(URL.revokeObjectURL(s.value),s.value=null),l.value=null)}),E(()=>{s.value&&URL.revokeObjectURL(s.value)}),(t,e)=>(u(),d("div",{class:H(["image-uploader",{"has-error":M.value}])},[i("div",{class:H(["upload-area",{"drag-over":x.value,"has-image":L.value,disabled:o.disabled}]),onDragover:e[0]||(e[0]=f(r=>x.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=f(r=>x.value=!1,["prevent"])),onDrop:f(V,["prevent"]),onClick:W},[i("input",{ref_key:"fileInput",ref:w,type:"file",id:o.id,accept:o.accept,disabled:o.disabled,class:"hidden",onChange:I},null,40,G),i("div",K,[L.value&&U.value?(u(),d("div",q,[i("img",{src:U.value,alt:$.value,class:"preview-image",onLoad:D,onError:N},null,40,J),i("div",Q,[i("button",{onClick:f(j,["stop"]),class:"remove-btn",disabled:o.disabled,type:"button",title:"Remove image"},e[2]||(e[2]=[i("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,X),i("button",{onClick:f(W,["stop"]),class:"replace-btn",disabled:o.disabled,type:"button",title:"Replace image"},e[3]||(e[3]=[i("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1)]),8,Y)]),l.value?(u(),d("div",Z,[i("p",ee,c(l.value.name),1),i("p",te,[O(c(y(l.value.size))+" ",1),l.value.dimensions?(u(),d("span",ae," • "+c(l.value.dimensions.width)+"×"+c(l.value.dimensions.height),1)):k("",!0)])])):k("",!0)])):(u(),d("div",ie,[e[4]||(e[4]=i("div",{class:"upload-icon"},[i("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),i("div",se,[i("p",le,c(o.label),1),i("p",re,c(o.description),1),i("p",oe," Maximum file size: "+c(y(o.maxSize)),1),z.value?(u(),d("p",ne,c(z.value),1)):k("",!0)])]))])],34),M.value?(u(),d("div",de,[e[6]||(e[6]=i("div",{class:"error-icon"},[i("svg",{class:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),i("div",ue,[(u(!0),d(T,null,A(B.value,(r,h)=>(u(),d("div",{key:h,class:"error-message"},c(r),1))),128))]),i("button",{onClick:C,class:"clear-errors",type:"button"},e[5]||(e[5]=[i("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])):k("",!0)],2))}},he=P(ce,[["__scopeId","data-v-fc683d1d"]]);export{he as I};
