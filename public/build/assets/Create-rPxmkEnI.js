import{m as y,b as Y,j as J,d as W,o as g,w as N,e as o,f as w,a,k as p,n as d,u as s,c,F as h,z as k,t as f,q as C,v as H,p as V,i as I,g as Q,A as B,s as X}from"./app-DIXSCgPE.js";import{_ as Z}from"./AuthenticatedLayout-_5prmJNd.js";import{_ as n,b as u,a as _}from"./TextInput-CeUe0YzA.js";import{I as ee}from"./ImageUploader-BEV3LDHI.js";import{S as te}from"./SimpleFileUploader-zw66EHqa.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                                                                      */const oe={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},le={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},se={class:"p-6 text-gray-900"},re=["value"],ae={class:"grid grid-cols-2 md:grid-cols-3 gap-3"},ne=["id","value"],ie=["for"],de={class:"mt-4"},ue={class:"mt-1"},me={class:"relative"},ge=["onClick"],ce=["disabled"],pe=["disabled"],fe={key:0,class:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-10 p-2"},ve={class:"text-sm text-gray-600 flex items-center justify-between"},be={class:"font-medium text-indigo-600 bg-indigo-50 px-2 py-1 rounded"},ye={key:0,class:"mt-1 p-2 bg-gray-50 border border-gray-200 rounded-md"},_e={class:"flex flex-wrap gap-1"},xe=["onClick","onKeydown"],we={class:"text-xs text-gray-500 mt-1"},he={class:"flex items-center justify-end space-x-3"},ke=["disabled"],Ue={__name:"Create",props:{clients:{type:Array,required:!0}},setup(E){const v=y(!1),q=[{value:"website",label:"Website"},{value:"facebook",label:"Facebook"},{value:"instagram",label:"Instagram"},{value:"twitter",label:"Twitter"},{value:"linkedin",label:"LinkedIn"},{value:"tiktok",label:"TikTok"},{value:"youtube",label:"YouTube"},{value:"pinterest",label:"Pinterest"},{value:"email",label:"Email"},{value:"other",label:"Other"}],l=Y({client_id:"",title:"",platform:[],content_type:"",description:"",content_url:"",image:null,post_count:1,scheduled_date:"",published_date:"",status:"draft",content_category:"",tags:[],notes:"",meta_description:"",seo_keywords:"",media:[]}),L=r=>{console.log("Image loaded:",r),l.image_dimensions={width:r.width,height:r.height}},R=r=>{console.log("Media files changed:",r)},b=y(""),S=y(null),F=y(!1),x=y(""),$=y(["social-media","blog","video","image","campaign","promotional","educational","entertainment"]),D=J(()=>Array.isArray(l.tags)?l.tags.filter(r=>r&&r.trim()):[]),j=()=>{S.value&&S.value.focus()},G=()=>{const r=b.value.trim();x.value=r},K=r=>{const e=b.value.trim();r.key==="Enter"||r.key===","||r.keyCode===188?(r.preventDefault(),e&&P(e)):r.key==="Backspace"&&!e&&D.value.length>0&&(r.preventDefault(),A(D.value.length-1))},M=r=>{r?.preventDefault?.(),r?.stopPropagation?.();const e=b.value.trim();e&&P(e)},P=r=>{if(!r)return;const e=r.trim();e&&(l.tags.includes(e)||l.tags.push(e),b.value="",x.value="")},A=r=>{r>=0&&r<l.tags.length&&l.tags.splice(r,1)},T=r=>{P(r)},z=()=>{v.value=!0;const r={...l.data()};if(console.log("Original form data:",r),r.client_id===""||r.client_id===null?(r.client_id=null,console.log("Client ID set to null")):(r.client_id=parseInt(r.client_id),console.log("Client ID converted to number:",r.client_id)),r.published_date){const t=new Date(r.published_date);if(!isNaN(t.getTime())){const i=t.getFullYear(),m=String(t.getMonth()+1).padStart(2,"0"),U=String(t.getDate()).padStart(2,"0");r.published_date=`${i}-${m}-${U}`,console.log("Published date formatted:",r.published_date)}}if(r.scheduled_date){const t=new Date(r.scheduled_date);if(!isNaN(t.getTime())){const i=t.getFullYear(),m=String(t.getMonth()+1).padStart(2,"0"),U=String(t.getDate()).padStart(2,"0");r.scheduled_date=`${i}-${m}-${U}`,console.log("Scheduled date formatted:",r.scheduled_date)}}r.content_url===""&&(r.content_url=null,console.log("Content URL set to null"));const e=new FormData;Object.keys(r).forEach(t=>{t==="media"?Array.isArray(r.media)&&r.media.forEach((i,m)=>{i instanceof File&&e.append(`media[${m}]`,i)}):t==="image"?r.image instanceof File?(e.append(t,r.image),console.log("Appended image file:",r.image.name)):(r.image===null||r.image===void 0||r.image==="")&&console.log("Image field is empty, skipping"):Array.isArray(r[t])?t==="platform"||t==="tags"?e.append(t,JSON.stringify(r[t])):r[t].forEach((i,m)=>{e.append(`${t}[${m}]`,i)}):r[t]===null?e.append(t,""):e.append(t,r[t])}),console.log("FormData client_id:",e.get("client_id")),console.log("FormData published_date:",e.get("published_date")),console.log("FormData scheduled_date:",e.get("scheduled_date")),console.log("FormData content_url:",e.get("content_url")),console.log("FormData image field:",e.get("image")),console.log("Form image field value:",r.image),console.log("Form image field type:",typeof r.image),console.log("Final form data being submitted:");for(let t of e.entries())console.log(t[0]+":",t[1]);l.post(route("content.web.store"),{data:e,onSuccess:()=>{},onError:t=>{console.error("Form submission error:",t)},onFinish:()=>{v.value=!1}})},O=()=>{X.visit(route("content.web.index"))};return(r,e)=>(g(),W(Z,null,{header:N(()=>e[20]||(e[20]=[o("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Create New Content Post ",-1)])),default:N(()=>[o("div",null,[o("div",oe,[o("div",le,[o("div",se,[o("form",{onSubmit:w(z,["prevent"]),class:"space-y-6"},[o("div",null,[a(n,{for:"client_id",value:"Client *"}),p(o("select",{id:"client_id","onUpdate:modelValue":e[0]||(e[0]=t=>s(l).client_id=t),required:"",class:d(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(l).errors.client_id}])},[e[21]||(e[21]=o("option",{value:""},"Select a client",-1)),(g(!0),c(h,null,k(E.clients,t=>(g(),c("option",{key:t.id,value:t.id},f(t.first_name)+" "+f(t.last_name),9,re))),128))],2),[[C,s(l).client_id]]),a(u,{message:s(l).errors.client_id,class:"mt-2"},null,8,["message"])]),o("div",null,[a(n,{for:"title",value:"Title *"}),a(_,{id:"title",modelValue:s(l).title,"onUpdate:modelValue":e[1]||(e[1]=t=>s(l).title=t),type:"text",class:d(["mt-1 block w-full",{"border-red-500":s(l).errors.title}]),required:""},null,8,["modelValue","class"]),a(u,{message:s(l).errors.title,class:"mt-2"},null,8,["message"])]),o("div",null,[a(n,{value:"Platforms *",class:"mb-2"}),o("div",ae,[(g(),c(h,null,k(q,t=>o("div",{key:t.value,class:"flex items-center"},[p(o("input",{type:"checkbox",id:`platform-${t.value}`,value:t.value,"onUpdate:modelValue":e[2]||(e[2]=i=>s(l).platform=i),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,ne),[[H,s(l).platform]]),o("label",{for:`platform-${t.value}`,class:"ml-2 text-sm text-gray-700"},f(t.label),9,ie)])),64))]),a(u,{message:s(l).errors.platform,class:"mt-2"},null,8,["message"])]),o("div",null,[a(n,{for:"content_type",value:"Content Type *"}),p(o("select",{id:"content_type","onUpdate:modelValue":e[3]||(e[3]=t=>s(l).content_type=t),required:"",class:d(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(l).errors.content_type}])},e[22]||(e[22]=[o("option",{value:""}," Select content type ",-1),o("option",{value:"post"},"Post",-1),o("option",{value:"story"},"Story",-1),o("option",{value:"reel"},"Reel",-1),o("option",{value:"video"},"Video",-1),o("option",{value:"image"},"Image",-1),o("option",{value:"carousel"},"Carousel",-1),o("option",{value:"live"},"Live",-1),o("option",{value:"article"},"Article",-1)]),2),[[C,s(l).content_type]]),a(u,{message:s(l).errors.content_type,class:"mt-2"},null,8,["message"])]),o("div",de,[a(n,{for:"description",value:"Description *"}),p(o("textarea",{id:"description","onUpdate:modelValue":e[4]||(e[4]=t=>s(l).description=t),required:"",class:d(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(l).errors.description}]),rows:"4"},null,2),[[V,s(l).description]]),a(u,{message:s(l).errors.description,class:"mt-2"},null,8,["message"])]),o("div",null,[a(n,{for:"content_url",value:"Content URL *"}),a(_,{id:"content_url",modelValue:s(l).content_url,"onUpdate:modelValue":e[5]||(e[5]=t=>s(l).content_url=t),type:"url",required:"",class:d(["mt-1 block w-full",{"border-red-500":s(l).errors.content_url}])},null,8,["modelValue","class"]),a(u,{message:s(l).errors.content_url,class:"mt-2"},null,8,["message"])]),o("div",null,[a(n,{for:"post_count",value:"Post Count"}),a(_,{id:"post_count",modelValue:s(l).post_count,"onUpdate:modelValue":e[6]||(e[6]=t=>s(l).post_count=t),type:"number",min:"1",class:d(["mt-1 block w-full",{"border-red-500":s(l).errors.post_count}])},null,8,["modelValue","class"]),a(u,{message:s(l).errors.post_count,class:"mt-2"},null,8,["message"])]),o("div",null,[a(n,{for:"scheduled_date",value:"Scheduled Date *"}),a(_,{id:"scheduled_date",modelValue:s(l).scheduled_date,"onUpdate:modelValue":e[7]||(e[7]=t=>s(l).scheduled_date=t),type:"date",required:"",class:d(["mt-1 block w-full",{"border-red-500":s(l).errors.scheduled_date}])},null,8,["modelValue","class"]),a(u,{message:s(l).errors.scheduled_date,class:"mt-2"},null,8,["message"])]),o("div",null,[a(n,{for:"published_date",value:"Published Date *"}),a(_,{id:"published_date",modelValue:s(l).published_date,"onUpdate:modelValue":e[8]||(e[8]=t=>s(l).published_date=t),type:"date",required:"",class:d(["mt-1 block w-full",{"border-red-500":s(l).errors.published_date}])},null,8,["modelValue","class"]),a(u,{message:s(l).errors.published_date,class:"mt-2"},null,8,["message"])]),o("div",null,[a(n,{for:"status",value:"Status *"}),p(o("select",{id:"status","onUpdate:modelValue":e[9]||(e[9]=t=>s(l).status=t),required:"",class:d(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(l).errors.status}])},e[23]||(e[23]=[o("option",{value:"draft"},"Draft",-1),o("option",{value:"scheduled"},"Scheduled",-1),o("option",{value:"published"},"Published",-1),o("option",{value:"archived"},"Archived",-1)]),2),[[C,s(l).status]]),a(u,{message:s(l).errors.status,class:"mt-2"},null,8,["message"])]),o("div",null,[a(n,{for:"content_category",value:"Content Category"}),p(o("select",{id:"content_category","onUpdate:modelValue":e[10]||(e[10]=t=>s(l).content_category=t),class:d(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(l).errors.content_category}])},e[24]||(e[24]=[o("option",{value:""},"Select Category",-1),o("option",{value:"Social Media Post"}," Social Media Post ",-1),o("option",{value:"Blog Article"}," Blog Article ",-1),o("option",{value:"Email Newsletter"}," Email Newsletter ",-1),o("option",{value:"Product Description"}," Product Description ",-1),o("option",{value:"Marketing Campaign"}," Marketing Campaign ",-1),o("option",{value:"Press Release"}," Press Release ",-1),o("option",{value:"Video Content"}," Video Content ",-1),o("option",{value:"Other"},"Other",-1)]),2),[[C,s(l).content_category]]),a(u,{message:s(l).errors.content_category,class:"mt-2"},null,8,["message"])]),o("div",null,[a(n,{for:"tags",value:"Tags"}),o("div",ue,[o("div",me,[o("div",{class:d(["flex flex-wrap items-center gap-2 p-2 border border-gray-300 rounded-md shadow-sm focus-within:border-indigo-500 focus-within:ring-1 focus-within:ring-indigo-500 min-h-12 transition-colors",{"border-red-500":s(l).errors.tags,"bg-gray-50":F.value}]),onClick:j},[(g(!0),c(h,null,k(D.value,(t,i)=>(g(),c("span",{key:i,class:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800 border border-indigo-200 transition-all hover:bg-indigo-200 hover:scale-105"},[Q(f(t.trim())+" ",1),o("button",{type:"button",onClick:w(m=>A(i),["stop"]),class:"text-indigo-600 hover:text-indigo-800 focus:outline-none transition-colors",title:"Remove tag"},e[25]||(e[25]=[o("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,ge)]))),128)),p(o("input",{ref_key:"tagInputRef",ref:S,type:"text","onUpdate:modelValue":e[11]||(e[11]=t=>b.value=t),onKeydown:K,onFocus:e[12]||(e[12]=t=>F.value=!0),onBlur:e[13]||(e[13]=t=>F.value=!1),onInput:G,placeholder:"Type to add tags...",class:d(["flex-1 min-w-0 bg-transparent border-none outline-none py-1 px-2 text-sm placeholder-gray-400",{"opacity-50":v.value}]),disabled:v.value},null,42,ce),[[V,b.value]]),b.value.trim()?(g(),c("button",{key:0,type:"button",onClick:e[14]||(e[14]=w((...t)=>M&&M(...t),["prevent","stop"])),class:"text-indigo-600 hover:text-indigo-800 focus:outline-none transition-colors p-1 rounded",title:"Add tag",disabled:v.value},e[26]||(e[26]=[o("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)]),8,pe)):I("",!0)],2),x.value?(g(),c("div",fe,[o("div",ve,[e[27]||(e[27]=o("span",null,"Press Enter or Comma to add:",-1)),o("span",be,f(x.value),1)])])):I("",!0)]),$.value.length>0?(g(),c("div",ye,[e[28]||(e[28]=o("p",{class:"text-xs text-gray-500 mb-1"}," Common tags: ",-1)),o("div",_e,[(g(!0),c(h,null,k($.value,(t,i)=>(g(),c("span",{key:i,onClick:m=>T(t),class:"text-xs px-2 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors cursor-pointer inline-block",role:"button",tabindex:"0",onKeydown:[B(m=>T(t),["enter"]),B(w(m=>T(t),["prevent"]),["space"])]},f(t),41,xe))),128))])])):I("",!0)]),a(u,{message:s(l).errors.tags,class:"mt-2"},null,8,["message"])]),o("div",null,[a(n,{for:"notes",value:"Notes"}),p(o("textarea",{id:"notes","onUpdate:modelValue":e[15]||(e[15]=t=>s(l).notes=t),rows:"3",class:d(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(l).errors.notes}])},null,2),[[V,s(l).notes]]),a(u,{message:s(l).errors.notes,class:"mt-2"},null,8,["message"])]),o("div",null,[a(n,{for:"meta_description",value:"Meta Description"}),p(o("textarea",{id:"meta_description","onUpdate:modelValue":e[16]||(e[16]=t=>s(l).meta_description=t),rows:"2",maxlength:"255",class:d(["mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":s(l).errors.meta_description}])},null,2),[[V,s(l).meta_description]]),a(u,{message:s(l).errors.meta_description,class:"mt-2"},null,8,["message"]),o("p",we,f(s(l).meta_description?s(l).meta_description.length:0)+"/255 characters ",1)]),o("div",null,[a(n,{for:"seo_keywords",value:"SEO Keywords"}),a(_,{id:"seo_keywords",modelValue:s(l).seo_keywords,"onUpdate:modelValue":e[17]||(e[17]=t=>s(l).seo_keywords=t),type:"text",maxlength:"255",class:d(["mt-1 block w-full",{"border-red-500":s(l).errors.seo_keywords}])},null,8,["modelValue","class"]),a(u,{message:s(l).errors.seo_keywords,class:"mt-2"},null,8,["message"]),e[29]||(e[29]=o("p",{class:"text-xs text-gray-500 mt-1"}," Separate keywords with commas ",-1))]),o("div",null,[a(n,{value:"Upload Image",class:"mb-2"}),a(ee,{modelValue:s(l).image,"onUpdate:modelValue":e[18]||(e[18]=t=>s(l).image=t),label:"Main Image",accept:"image/*","max-size":10*1024*1024,description:"Drag & drop image here or click to browse",error:s(l).errors.image,onImageLoaded:L},null,8,["modelValue","error"]),e[30]||(e[30]=o("p",{class:"text-xs text-gray-500 mt-2"}," Upload a single image file. Supported formats: JPG, PNG, GIF, WebP (max 10MB, 100×100 to 4000×4000 pixels) ",-1))]),o("div",null,[a(n,{value:"Upload Additional Files",class:"mb-2"}),a(te,{modelValue:s(l).media,"onUpdate:modelValue":e[19]||(e[19]=t=>s(l).media=t),label:"Additional Files",accept:"image/*,.pdf,.xlsx,.csv",multiple:!0,"max-size":10*1024*1024,"max-files":10,description:"Drag & drop files here or click to browse",error:s(l).errors.media,onChange:R},null,8,["modelValue","error"]),e[31]||(e[31]=o("p",{class:"text-xs text-gray-500 mt-2"}," You can upload up to 10 files. Supported formats: JPG, PNG, GIF, PDF, Excel, CSV (max 10MB each) ",-1))]),o("div",he,[o("button",{type:"button",onClick:O,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Cancel "),o("button",{type:"submit",disabled:v.value,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"},f(v.value?"Creating...":"Create Content Post"),9,ke)])],32)])])])])]),_:1}))}};export{Ue as default};
