import{m as h,j as k,y as Y,x as G,d as J,o as i,w as m,e,c as u,t as n,i as _,k as c,p as b,F as C,z as S,q as j,g as F,a as M,n as K,s as f}from"./app-B2jK0_72.js";import{_ as Q}from"./AuthenticatedLayout-U9Pl7f8v.js";import{D as W,_ as X}from"./Pagination--XhsgPpS.js";import"./Modal-5yiuopA_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ee={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},te={class:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-3 border border-green-100"},oe={class:"flex items-center"},se={class:"ml-4"},le={class:"text-2xl font-bold text-gray-900"},re={class:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-3 border border-blue-100"},ne={class:"flex items-center"},ae={class:"ml-4"},ie={class:"text-2xl font-bold text-gray-900"},de={class:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-3 border border-purple-100"},ue={class:"flex items-center"},me={class:"ml-4"},ce={class:"text-2xl font-bold text-gray-900"},ge={class:"bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl p-3 border border-yellow-100"},fe={class:"flex items-center"},pe={class:"ml-4"},xe={class:"text-2xl font-bold text-gray-900"},be={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-8"},ve={class:"p-6"},ye={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},he={class:"lg:col-span-2"},we={class:"relative"},ke=["value"],_e={class:"mt-4"},Ce=["aria-expanded"],Se={key:0,class:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},je={class:"mt-6 flex flex-col sm:flex-row gap-3 justify-end"},Fe=["disabled"],Me={key:0,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},Te={class:"animate-pulse space-y-4"},Ve={class:"space-y-3"},Ae={key:1,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center"},Be={key:2,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center"},De={key:3,class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},ze={class:"relative"},Ne={key:0,class:"absolute inset-0 bg-white bg-opacity-50 z-10 flex items-center justify-center"},Pe={class:"font-semibold text-green-600 text-lg"},$e={class:"text-sm text-gray-900"},Ee={class:"font-medium text-gray-900"},Ue={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Oe={class:"border-t border-gray-200"},Ye={__name:"Index",props:{sales:{type:Object,required:!0},clients:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})}},setup(T){const r=T,d=h(!1),p=h(!1),l=h({search:r.filters.search||"",status:r.filters.status||"",date_from:r.filters.date_from||"",date_to:r.filters.date_to||"",min_amount:r.filters.min_amount||"",max_amount:r.filters.max_amount||"",payment_method:r.filters.payment_method||""}),a=k(()=>r.sales.data||[]),v=k(()=>Object.values(l.value).some(s=>s!=="")),V=[{key:"id",label:"ID",sortable:!0},{key:"product_name",label:"Product",sortable:!0},{key:"client",label:"Client",sortable:!0},{key:"amount",label:"Amount",type:"currency",sortable:!0},{key:"sale_date",label:"Date",type:"date",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"payment_method",label:"Payment",sortable:!0}],A=[{value:"pending",label:"Pending"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],B=[{value:"pending",label:"Pending"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],y=()=>{f.visit("/sales/create")},D=s=>{f.visit(`/sales/${s.id}/edit`)},z=s=>{f.visit(`/sales/${s.id}`)},N=async s=>{if(confirm("Are you sure you want to delete this sale?"))try{d.value=!0,await f.delete(`/sales/${s.id}`,{preserveScroll:!0,onSuccess:()=>{},onError:t=>{console.error("Error deleting sale:",t),t.message?.includes("403")&&alert("You don't have permission to delete this sale.")},onFinish:()=>{d.value=!1}})}catch(t){d.value=!1,console.error("Error deleting sale:",t)}},P=()=>{clearTimeout(window.searchTimeout),window.searchTimeout=setTimeout(()=>{x()},300)},g=()=>{x()},x=()=>{d.value=!0;const s={};Object.keys(l.value).forEach(t=>{l.value[t]&&(s[t]=l.value[t])}),f.get("/sales",s,{preserveState:!0,preserveScroll:!0,only:["sales","filters"],onError:t=>{console.error("Error applying filters:",t),t.message?.includes("403")&&alert("You don't have permission to view sales.")},onFinish:()=>{d.value=!1}})},w=()=>{l.value={search:"",status:"",date_from:"",date_to:"",min_amount:"",max_amount:"",payment_method:""},x()},$=s=>{f.visit(s,{preserveState:!0,preserveScroll:!0,only:["sales","clients","filters"]})},E=()=>a.value.reduce((s,t)=>s+parseFloat(t.amount||0),0).toFixed(2),U=()=>a.value.length===0?"0.00":(a.value.reduce((t,o)=>t+parseFloat(o.amount||0),0)/a.value.length).toFixed(2),O=()=>a.value.filter(s=>s.status==="pending").length,H=s=>parseFloat(s).toFixed(2),I=s=>s?new Date(s).toLocaleDateString():"N/A",L=s=>s?s.charAt(0).toUpperCase()+s.slice(1).replace("_"," "):"",q=s=>({cash:"Cash",card:"Card",online:"Online"})[s]||s,R=s=>({pending:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800";return Y(l,()=>{clearTimeout(window.filterTimeout),window.filterTimeout=setTimeout(()=>{x()},300)},{deep:!0}),G(()=>{}),(s,t)=>(i(),J(Q,null,{header:m(()=>[e("div",{class:"flex flex-col lg:flex-row lg:justify-between lg:items-start gap-4"},[t[9]||(t[9]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 leading-tight"}," Sales Management "),e("p",{class:"mt-1 text-sm text-gray-500"}," Track and manage all your sales transactions ")],-1)),e("div",{class:"flex flex-col sm:flex-row sm:items-center sm:space-x-3 space-y-2 sm:space-y-0 mt-4 lg:mt-0"},[e("button",{onClick:y,class:"inline-flex items-center justify-center px-4 py-2 bg-indigo-600 border border-transparent rounded-lg font-medium text-sm text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 shadow-sm"},t[8]||(t[8]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),F(" New Sale ",-1)]))])])]),default:m(()=>[e("div",Z,[e("div",ee,[e("div",te,[e("div",oe,[t[11]||(t[11]=e("div",{class:"flex-shrink-0"},[e("div",{class:"inline-flex items-center justify-center w-12 h-12 bg-green-100 rounded-full"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",se,[t[10]||(t[10]=e("p",{class:"text-sm font-medium text-green-600"}," Total Revenue ",-1)),e("p",le," $"+n(E()),1)])])]),e("div",re,[e("div",ne,[t[13]||(t[13]=e("div",{class:"flex-shrink-0"},[e("div",{class:"inline-flex items-center justify-center w-12 h-12 bg-blue-100 rounded-full"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])])],-1)),e("div",ae,[t[12]||(t[12]=e("p",{class:"text-sm font-medium text-blue-600"}," Total Sales ",-1)),e("p",ie,n(a.value.length),1)])])]),e("div",de,[e("div",ue,[t[15]||(t[15]=e("div",{class:"flex-shrink-0"},[e("div",{class:"inline-flex items-center justify-center w-12 h-12 bg-purple-100 rounded-full"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])])],-1)),e("div",me,[t[14]||(t[14]=e("p",{class:"text-sm font-medium text-purple-600"}," Average Sale ",-1)),e("p",ce," $"+n(U()),1)])])]),e("div",ge,[e("div",fe,[t[17]||(t[17]=e("div",{class:"flex-shrink-0"},[e("div",{class:"inline-flex items-center justify-center w-12 h-12 bg-yellow-100 rounded-full"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",pe,[t[16]||(t[16]=e("p",{class:"text-sm font-medium text-yellow-600"}," Pending ",-1)),e("p",xe,n(O()),1)])])])]),e("div",be,[t[29]||(t[29]=e("div",{class:"bg-gradient-to-r from-green-500 to-teal-600 px-6 py-4"},[e("h2",{class:"text-xl font-semibold text-white"}," Search & Filter ")],-1)),e("div",ve,[e("div",ye,[e("div",he,[t[19]||(t[19]=e("label",{for:"search",class:"block text-sm font-medium text-gray-700 mb-1"}," Search sales ",-1)),e("div",we,[t[18]||(t[18]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),c(e("input",{id:"search","onUpdate:modelValue":t[0]||(t[0]=o=>l.value.search=o),type:"text",placeholder:"Search by product name or client...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 sm:text-sm transition-colors duration-200",onInput:P,"aria-describedby":"search-description"},null,544),[[b,l.value.search]])]),t[20]||(t[20]=e("p",{id:"search-description",class:"mt-1 text-xs text-gray-500"}," Search by product name, client, or description ",-1))]),e("div",null,[t[22]||(t[22]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-1"}," Status ",-1)),c(e("select",{id:"status","onUpdate:modelValue":t[1]||(t[1]=o=>l.value.status=o),class:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors duration-200",onChange:g},[t[21]||(t[21]=e("option",{value:""},"All Status",-1)),(i(),u(C,null,S(A,o=>e("option",{key:o.value,value:o.value},n(o.label),9,ke)),64))],544),[[j,l.value.status]])]),e("div",null,[t[24]||(t[24]=e("label",{for:"payment_method",class:"block text-sm font-medium text-gray-700 mb-1"}," Payment Method ",-1)),c(e("select",{id:"payment_method","onUpdate:modelValue":t[2]||(t[2]=o=>l.value.payment_method=o),class:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors duration-200",onChange:g},t[23]||(t[23]=[e("option",{value:""},"All Methods",-1),e("option",{value:"cash"},"Cash",-1),e("option",{value:"card"},"Card",-1),e("option",{value:"online"},"Online",-1)]),544),[[j,l.value.payment_method]])])]),e("div",_e,[e("button",{onClick:t[3]||(t[3]=o=>p.value=!p.value),class:"text-sm text-green-600 hover:text-green-500 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors duration-200","aria-expanded":p.value},n(p.value?"Hide":"Show")+" advanced filters ",9,Ce)]),p.value?(i(),u("div",Se,[e("div",null,[t[25]||(t[25]=e("label",{for:"date_from",class:"block text-sm font-medium text-gray-700 mb-1"}," Date From ",-1)),c(e("input",{id:"date_from","onUpdate:modelValue":t[4]||(t[4]=o=>l.value.date_from=o),type:"date",class:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors duration-200",onChange:g},null,544),[[b,l.value.date_from]])]),e("div",null,[t[26]||(t[26]=e("label",{for:"date_to",class:"block text-sm font-medium text-gray-700 mb-1"}," Date To ",-1)),c(e("input",{id:"date_to","onUpdate:modelValue":t[5]||(t[5]=o=>l.value.date_to=o),type:"date",class:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors duration-200",onChange:g},null,544),[[b,l.value.date_to]])]),e("div",null,[t[27]||(t[27]=e("label",{for:"min_amount",class:"block text-sm font-medium text-gray-700 mb-1"}," Min Amount ",-1)),c(e("input",{id:"min_amount","onUpdate:modelValue":t[6]||(t[6]=o=>l.value.min_amount=o),type:"number",placeholder:"0.00",step:"0.01",class:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors duration-200",onChange:g},null,544),[[b,l.value.min_amount]])]),e("div",null,[t[28]||(t[28]=e("label",{for:"max_amount",class:"block text-sm font-medium text-gray-700 mb-1"}," Max Amount ",-1)),c(e("input",{id:"max_amount","onUpdate:modelValue":t[7]||(t[7]=o=>l.value.max_amount=o),type:"number",placeholder:"0.00",step:"0.01",class:"block w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors duration-200",onChange:g},null,544),[[b,l.value.max_amount]])])])):_("",!0),e("div",je,[e("button",{onClick:w,disabled:!v.value,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200","aria-label":"Clear all filters"}," Clear Filters ",8,Fe),e("button",{onClick:x,class:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-200 shadow-sm","aria-label":"Apply filters"}," Apply Filters ")])])]),d.value&&a.value.length===0?(i(),u("div",Me,[e("div",Te,[t[30]||(t[30]=e("div",{class:"h-4 bg-gray-200 rounded w-1/4"},null,-1)),e("div",Ve,[(i(),u(C,null,S(5,o=>e("div",{key:o,class:"h-12 bg-gray-200 rounded"})),64))])])])):a.value.length===0&&!v.value?(i(),u("div",Ae,[t[32]||(t[32]=e("svg",{class:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)),t[33]||(t[33]=e("h3",{class:"mt-2 text-lg font-medium text-gray-900"}," No sales yet ",-1)),t[34]||(t[34]=e("p",{class:"mt-1 text-sm text-gray-500"}," Get started by creating your first sale. ",-1)),e("div",{class:"mt-6"},[e("button",{onClick:y,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-200","aria-label":"Create new sale"},t[31]||(t[31]=[e("svg",{class:"-ml-1 mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),F(" New Sale ",-1)]))])])):a.value.length===0&&v.value?(i(),u("div",Be,[t[35]||(t[35]=e("svg",{class:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),t[36]||(t[36]=e("h3",{class:"mt-2 text-lg font-medium text-gray-900"}," No sales found ",-1)),t[37]||(t[37]=e("p",{class:"mt-1 text-sm text-gray-500"}," Try adjusting your search criteria or clear filters. ",-1)),e("div",{class:"mt-6"},[e("button",{onClick:w,class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-200","aria-label":"Clear filters"}," Clear Filters ")])])):(i(),u("div",De,[t[39]||(t[39]=e("div",{class:"bg-gradient-to-r from-gray-700 to-gray-900 px-6 py-4"},[e("h2",{class:"text-xl font-semibold text-white"},"Sales List")],-1)),e("div",ze,[d.value?(i(),u("div",Ne,t[38]||(t[38]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"},null,-1)]))):_("",!0),M(W,{data:a.value,columns:V,filters:B,loading:d.value,onCreate:y,onView:z,onEdit:D,onDelete:N},{amount:m(({item:o})=>[e("span",Pe," $"+n(H(o.amount)),1)]),status:m(({item:o})=>[e("span",{class:K([R(o.status),"px-3 py-1 text-xs font-medium rounded-full"])},n(L(o.status)),3)]),sale_date:m(({item:o})=>[e("div",$e,n(I(o.sale_date)),1)]),client:m(({item:o})=>[e("div",Ee,n(o.client?.name||"N/A"),1)]),payment_method:m(({item:o})=>[e("span",Ue,n(q(o.payment_method)),1)]),_:1},8,["data","loading"])]),e("div",Oe,[M(X,{links:r.sales.links,from:r.sales.from,to:r.sales.to,total:r.sales.total,onNavigate:$,class:"bg-gray-50 px-6 py-3"},null,8,["links","from","to","total"])])]))])]),_:1}))}};export{Ye as default};
